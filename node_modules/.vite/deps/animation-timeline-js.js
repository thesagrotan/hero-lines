import {
  __commonJS
} from "./chunk-5WRI5ZAA.js";

// node_modules/animation-timeline-js/lib/animation-timeline.min.js
var require_animation_timeline_min = __commonJS({
  "node_modules/animation-timeline-js/lib/animation-timeline.min.js"(exports, module) {
    !function(e, t) {
      "object" == typeof exports && "object" == typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define([], t) : "object" == typeof exports ? exports.timelineModule = t() : e.timelineModule = t();
    }(self, () => (() => {
      "use strict";
      var e = { d: (t2, n2) => {
        for (var o2 in n2) e.o(n2, o2) && !e.o(t2, o2) && Object.defineProperty(t2, o2, { enumerable: true, get: n2[o2] });
      }, o: (e2, t2) => Object.prototype.hasOwnProperty.call(e2, t2), r: (e2) => {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e2, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e2, "__esModule", { value: true });
      } }, t = {};
      function n(e2) {
        return n = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e3) {
          return typeof e3;
        } : function(e3) {
          return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : typeof e3;
        }, n(e2);
      }
      function o(e2, t2) {
        for (var n2 = 0; n2 < t2.length; n2++) {
          var o2 = t2[n2];
          o2.enumerable = o2.enumerable || false, o2.configurable = true, "value" in o2 && (o2.writable = true), Object.defineProperty(e2, r(o2.key), o2);
        }
      }
      function r(e2) {
        var t2 = function(e3) {
          if ("object" != n(e3) || !e3) return e3;
          var t3 = e3[Symbol.toPrimitive];
          if (void 0 !== t3) {
            var o2 = t3.call(e3, "string");
            if ("object" != n(o2)) return o2;
            throw new TypeError("@@toPrimitive must return a primitive value.");
          }
          return String(e3);
        }(e2);
        return "symbol" == n(t2) ? t2 : t2 + "";
      }
      e.r(t), e.d(t, { Timeline: () => Ve, TimelineCapShape: () => Se, TimelineClickEvent: () => ue, TimelineCursorType: () => be, TimelineDragEvent: () => me, TimelineDraggableData: () => T, TimelineElementType: () => w, TimelineEventSource: () => W, TimelineEvents: () => ke, TimelineEventsEmitter: () => i, TimelineInteractionMode: () => ge, TimelineKeyframeChangedEvent: () => V, TimelineKeyframeShape: () => l, TimelineScrollSource: () => Ce, TimelineSelectedEvent: () => ee, TimelineSelectionMode: () => we, TimelineStyleUtils: () => S, TimelineTimeChangedEvent: () => U, TimelineUtils: () => d, defaultGroupStyle: () => y, defaultRowHeight: () => v, defaultTimelineConsts: () => xe, defaultTimelineKeyframeStyle: () => p, defaultTimelineOptions: () => Pe, defaultTimelineRowStyle: () => _, defaultTimelineStyle: () => Me });
      var i = function() {
        return e2 = function e3() {
          var t3, n2, o2;
          !function(e4, t4) {
            if (!(e4 instanceof t4)) throw new TypeError("Cannot call a class as a function");
          }(this, e3), t3 = this, o2 = [], (n2 = r(n2 = "_subscriptions")) in t3 ? Object.defineProperty(t3, n2, { value: o2, enumerable: true, configurable: true, writable: true }) : t3[n2] = o2;
        }, (t2 = [{ key: "on", value: function(e3, t3) {
          return !!t3 && (this._subscriptions.push({ topic: e3, callback: t3 }), true);
        } }, { key: "off", value: function(e3, t3) {
          var n2 = this._subscriptions.length;
          return this._subscriptions = this._subscriptions.filter(function(n3) {
            return n3 && n3.callback != t3 && n3.topic != e3;
          }), n2 !== this._subscriptions.length;
        } }, { key: "offAll", value: function() {
          this._subscriptions.length = 0;
        } }, { key: "emit", value: function(e3, t3) {
          this._subscriptions.forEach(function(n2) {
            (null == n2 ? void 0 : n2.topic) === e3 && null != n2 && n2.callback && n2.callback(t3);
          });
        } }]) && o(e2.prototype, t2), Object.defineProperty(e2, "prototype", { writable: false }), e2;
        var e2, t2;
      }(), l = function(e2) {
        return e2.None = "none", e2.Rhomb = "rhomb", e2.Circle = "circle", e2.Rect = "rect", e2;
      }({});
      function a(e2) {
        return a = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e3) {
          return typeof e3;
        } : function(e3) {
          return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : typeof e3;
        }, a(e2);
      }
      function s(e2, t2) {
        for (var n2 = 0; n2 < t2.length; n2++) {
          var o2 = t2[n2];
          o2.enumerable = o2.enumerable || false, o2.configurable = true, "value" in o2 && (o2.writable = true), Object.defineProperty(e2, c(o2.key), o2);
        }
      }
      function u(e2, t2, n2) {
        return (t2 = c(t2)) in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
      }
      function c(e2) {
        var t2 = function(e3) {
          if ("object" != a(e3) || !e3) return e3;
          var t3 = e3[Symbol.toPrimitive];
          if (void 0 !== t3) {
            var n2 = t3.call(e3, "string");
            if ("object" != a(n2)) return n2;
            throw new TypeError("@@toPrimitive must return a primitive value.");
          }
          return String(e3);
        }(e2);
        return "symbol" == a(t2) ? t2 : t2 + "";
      }
      var f = [1, 2, 5, 10], d = function() {
        function e2() {
          !function(e3, t3) {
            if (!(e3 instanceof t3)) throw new TypeError("Cannot call a class as a function");
          }(this, e2);
        }
        return t2 = e2, n2 = [{ key: "drawLine", value: function(e3, t3, n3, o2, r2) {
          e3.moveTo(t3, n3), e3.lineTo(o2, r2);
        } }, { key: "isNumber", value: function(e3) {
          return !("number" != typeof e3 || !e3 && 0 !== e3 || isNaN(e3) || !Number.isFinite(e3));
        } }, { key: "deleteElement", value: function(e3, t3) {
          var n3 = e3.indexOf(t3);
          return -1 !== n3 ? e3.splice(n3, 1) : e3;
        } }, { key: "isOverlap", value: function(e3, t3, n3) {
          return !!n3 && n3.x <= e3 && n3.x + n3.width >= e3 && n3.y <= t3 && n3.y + n3.height >= t3;
        } }, { key: "findGoodStep", value: function(t3) {
          var n3 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, o2 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : f;
          if (o2 || (o2 = f), t3 <= 0 || isNaN(t3) || !Number.isFinite(t3)) return t3;
          for (var r2 = t3, i2 = null, l2 = e2.getPowArgument(t3), a2 = 0; a2 < o2.length; a2++) {
            var s2 = o2[a2] * Math.pow(10, l2);
            if (!n3 || n3 % s2 == 0) {
              var u2 = e2.getDistance(t3, s2);
              if (0 == u2 || u2 <= 0.1 && l2 > 0) {
                i2 = u2, r2 = s2;
                break;
              }
              (!i2 || i2 > u2) && (i2 = u2, r2 = s2);
            }
          }
          return r2;
        } }, { key: "keepInBounds", value: function(t3) {
          var n3 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, o2 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null;
          return e2.isNumber(t3) && (e2.isNumber(n3) && (n3 || 0 === n3) && (t3 = Math.max(t3, n3)), e2.isNumber(o2) && (o2 || 0 === o2) && (t3 = Math.min(t3, o2))), t3;
        } }, { key: "setMinMax", value: function(t3, n3) {
          var o2 = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
          if (!n3 || !t3) return t3;
          var r2 = n3 ? n3.min : Number.NaN, i2 = t3.min, l2 = (r2 || 0 === r2) && e2.isNumber(r2), a2 = (i2 || 0 === i2) && e2.isNumber(i2);
          l2 && a2 ? t3.min = o2 ? Math.min(r2, i2) : Math.max(r2, i2) : l2 && (t3.min = r2);
          var s2 = n3 ? n3.max : Number.NaN, u2 = t3.max, c2 = (s2 || 0 === s2) && e2.isNumber(s2), f2 = (u2 || 0 === u2) && e2.isNumber(u2);
          return c2 && f2 ? t3.max = o2 ? Math.max(s2, u2) : Math.min(s2, u2) : c2 && (t3.max = s2), t3;
        } }, { key: "shrinkSelf", value: function(e3, t3) {
          return e3 ? (e3.x -= t3, e3.y -= t3, e3.width += t3, e3.height += t3, e3) : e3;
        } }, { key: "isRectIntersects", value: function(e3, t3) {
          var n3 = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
          if (!e3 || !t3) return console.log("Rectangles cannot be empty"), false;
          var o2 = t3.x + t3.width, r2 = t3.y + t3.height;
          return n3 ? e3.x <= o2 && t3.x <= e3.x + e3.width && e3.y <= r2 && t3.y <= e3.y + e3.height : e3.x < o2 && t3.x < e3.x + e3.width && e3.y < r2 && t3.y < e3.y + e3.height;
        } }, { key: "getDistance", value: function(e3, t3, n3, o2) {
          return null != n3 && null != o2 ? Math.sqrt(Math.pow(e3 - n3, 2) + Math.pow(t3 - o2, 2)) : Math.abs(e3 - t3);
        } }, { key: "sign", value: function(e3) {
          return e3 >= 0 ? 1 : -1;
        } }, { key: "clearBrowserSelection", value: function() {
          if (window) if (window.getSelection) {
            var e3 = window.getSelection();
            e3 && e3.removeAllRanges();
          } else {
            var t3 = window.document;
            t3.selection && t3.selection.empty();
          }
        } }, { key: "getPowArgument", value: function(e3) {
          if (!e3 || 0 === e3 || !isFinite(e3)) return 1;
          if (e3 >= 10 && e3 < 100) return 1;
          if (e3 >= 100 && e3 < 1e3) return 2;
          if (e3 >= 1e3 && e3 < 1e4) return 3;
          e3 = Math.abs(e3);
          var t3 = 0, n3 = this.sign(e3);
          if (e3 > 1) {
            for (; e3 >= 1; ) e3 = Math.floor(e3 / 10), t3++;
            return n3 * t3 - 1;
          }
          return e3 > 0 ? Math.floor(Math.log(e3) / Math.log(10) + 1) - 1 : 1;
        } }, { key: "mergeOptions", value: function(t3, n3) {
          n3 = n3 || {};
          var o2 = e2.cloneOptions(t3);
          return function e3(t4, n4) {
            if (t4 && n4) for (var o3 in n4) Object.prototype.hasOwnProperty.call(n4, o3) && void 0 !== n4[o3] && ("object" === a(n4[o3]) ? "id" === o3 ? n4[o3] && n4[o3] !== t4[o3] && (t4[o3] = n4[o3]) : t4[o3] ? e3(t4[o3], n4[o3]) : t4[o3] = n4[o3] : t4[o3] = n4[o3]);
          }(o2, n3), o2;
        } }, { key: "timePadZero", value: function(e3) {
          var t3 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 2, n3 = String(e3), o2 = Math.pow(10, t3 - 1);
          if (e3 < o2) for (; String(o2).length > n3.length; ) n3 = "0".concat(e3);
          return n3;
        } }], null, n2 && s(t2, n2), Object.defineProperty(t2, "prototype", { writable: false }), t2;
        var t2, n2;
      }();
      u(d, "deepClone", function(e2) {
        return JSON.parse(JSON.stringify(e2));
      }), u(d, "cloneOptions", function(e2) {
        var t2 = JSON.parse(JSON.stringify(e2, function(e3, t3) {
          return "id" === e3 ? void 0 : t3;
        }));
        return t2.id = e2.id, t2;
      });
      var v = 24, y = { height: "auto", marginTop: 4, fillColor: "#094771" }, p = { fillColor: "DarkOrange", shape: l.Rhomb, selectedFillColor: "red", strokeColor: "black", selectedStrokeColor: "black", strokeThickness: 0.2, height: "auto", width: "auto" }, _ = { height: v, marginBottom: 2, fillColor: "#252526", keyframesStyle: p, groupsStyle: y };
      function h(e2, t2) {
        for (var n2 = 0; n2 < t2.length; n2++) {
          var o2 = t2[n2];
          o2.enumerable = o2.enumerable || false, o2.configurable = true, "value" in o2 && (o2.writable = true), Object.defineProperty(e2, m(o2.key), o2);
        }
      }
      function m(e2) {
        var t2 = function(e3) {
          if ("object" != g(e3) || !e3) return e3;
          var t3 = e3[Symbol.toPrimitive];
          if (void 0 !== t3) {
            var n2 = t3.call(e3, "string");
            if ("object" != g(n2)) return n2;
            throw new TypeError("@@toPrimitive must return a primitive value.");
          }
          return String(e3);
        }(e2);
        return "symbol" == g(t2) ? t2 : t2 + "";
      }
      function g(e2) {
        return g = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e3) {
          return typeof e3;
        } : function(e3) {
          return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : typeof e3;
        }, g(e2);
      }
      var b = "undefined", S = function() {
        function e2() {
          !function(e3, t3) {
            if (!(e3 instanceof t3)) throw new TypeError("Cannot call a class as a function");
          }(this, e2);
        }
        return t2 = e2, n2 = [{ key: "getGroup", value: function(e3) {
          return e3 && "string" == typeof e3 ? null : e3 || null;
        } }, { key: "getGroupStyle", value: function(t3) {
          var n3;
          return (null === (n3 = e2.getGroup(t3)) || void 0 === n3 ? void 0 : n3.style) || null;
        } }, { key: "getFirstSet", value: function(t3) {
          for (var n3 = arguments.length, o2 = new Array(n3 > 1 ? n3 - 1 : 0), r2 = 1; r2 < n3; r2++) o2[r2 - 1] = arguments[r2];
          return e2.getValue.apply(e2, [t3, false].concat(o2));
        } }, { key: "getValue", value: function(t3) {
          for (var n3 = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], o2 = [], r2 = false, i2 = arguments.length, l2 = new Array(i2 > 2 ? i2 - 2 : 0), a2 = 2; a2 < i2; a2++) l2[a2 - 2] = arguments[a2];
          l2.forEach(function(e3) {
            if (!r2 && g(e3) !== b) {
              if ("number" == typeof e3) {
                if (!d.isNumber(e3)) return;
              } else {
                if ("boolean" == typeof e3) return o2.push(e3), void (n3 && false === e3 && (r2 = true));
                if (!e3) return;
              }
              o2.push(e3);
            }
          });
          var s2 = o2 && o2.length > 0 ? o2[0] : t3;
          return !r2 && e2.getValueOrDefault(s2, t3);
        } }, { key: "getValueOrDefault", value: function(e3, t3) {
          return g(e3) === b ? t3 : "boolean" == typeof e3 ? e3 : "number" == typeof e3 ? e3 || 0 === e3 ? e3 : t3 : e3 || t3;
        } }, { key: "keyframeWidth", value: function(t3, n3, o2, r2) {
          var i2, l2, a2, s2, u2, c2;
          return e2.getFirstSet(p.width || "", null == t3 || null === (i2 = t3.style) || void 0 === i2 ? void 0 : i2.width, null === (l2 = e2.getGroupStyle(n3)) || void 0 === l2 || null === (l2 = l2.keyframesStyle) || void 0 === l2 ? void 0 : l2.width, null == o2 || null === (a2 = o2.keyframesStyle) || void 0 === a2 ? void 0 : a2.width, null == o2 || null === (s2 = o2.groupsStyle) || void 0 === s2 || null === (s2 = s2.keyframesStyle) || void 0 === s2 ? void 0 : s2.width, null == r2 || null === (u2 = r2.rowsStyle) || void 0 === u2 || null === (u2 = u2.groupsStyle) || void 0 === u2 || null === (u2 = u2.keyframesStyle) || void 0 === u2 ? void 0 : u2.width, null == r2 || null === (c2 = r2.rowsStyle) || void 0 === c2 || null === (c2 = c2.keyframesStyle) || void 0 === c2 ? void 0 : c2.width);
        } }, { key: "keyframeHeight", value: function(t3, n3, o2, r2) {
          var i2, l2, a2, s2, u2, c2;
          return e2.getFirstSet(p.height || "", null == t3 || null === (i2 = t3.style) || void 0 === i2 ? void 0 : i2.height, null === (l2 = e2.getGroupStyle(n3)) || void 0 === l2 || null === (l2 = l2.keyframesStyle) || void 0 === l2 ? void 0 : l2.height, null == o2 || null === (a2 = o2.keyframesStyle) || void 0 === a2 ? void 0 : a2.height, null == o2 || null === (s2 = o2.groupsStyle) || void 0 === s2 || null === (s2 = s2.keyframesStyle) || void 0 === s2 ? void 0 : s2.height, null == r2 || null === (u2 = r2.rowsStyle) || void 0 === u2 || null === (u2 = u2.groupsStyle) || void 0 === u2 || null === (u2 = u2.keyframesStyle) || void 0 === u2 ? void 0 : u2.height, null == r2 || null === (c2 = r2.rowsStyle) || void 0 === c2 || null === (c2 = c2.keyframesStyle) || void 0 === c2 ? void 0 : c2.height);
        } }, { key: "keyframeShape", value: function(t3, n3, o2, r2) {
          var i2, a2, s2, u2, c2, f2, d2 = p.shape || l.Rhomb;
          return e2.getFirstSet(d2, null == t3 || null === (i2 = t3.style) || void 0 === i2 ? void 0 : i2.shape, null === (a2 = e2.getGroupStyle(n3)) || void 0 === a2 || null === (a2 = a2.keyframesStyle) || void 0 === a2 ? void 0 : a2.shape, null == o2 || null === (s2 = o2.groupsStyle) || void 0 === s2 || null === (s2 = s2.keyframesStyle) || void 0 === s2 ? void 0 : s2.shape, null == o2 || null === (u2 = o2.keyframesStyle) || void 0 === u2 ? void 0 : u2.shape, n3 ? null == r2 || null === (c2 = r2.rowsStyle) || void 0 === c2 || null === (c2 = c2.groupsStyle) || void 0 === c2 || null === (c2 = c2.keyframesStyle) || void 0 === c2 ? void 0 : c2.shape : void 0, null == r2 || null === (f2 = r2.rowsStyle) || void 0 === f2 || null === (f2 = f2.keyframesStyle) || void 0 === f2 ? void 0 : f2.shape);
        } }, { key: "keyframeFillColor", value: function(t3, n3, o2, r2) {
          var i2, l2, a2, s2, u2, c2, f2 = p.fillColor || "";
          return e2.getFirstSet(f2, null == t3 || null === (i2 = t3.style) || void 0 === i2 ? void 0 : i2.fillColor, null === (l2 = e2.getGroupStyle(n3)) || void 0 === l2 || null === (l2 = l2.keyframesStyle) || void 0 === l2 ? void 0 : l2.fillColor, null == o2 || null === (a2 = o2.groupsStyle) || void 0 === a2 || null === (a2 = a2.keyframesStyle) || void 0 === a2 ? void 0 : a2.fillColor, null == o2 || null === (s2 = o2.keyframesStyle) || void 0 === s2 ? void 0 : s2.fillColor, n3 ? null == r2 || null === (u2 = r2.rowsStyle) || void 0 === u2 || null === (u2 = u2.groupsStyle) || void 0 === u2 || null === (u2 = u2.keyframesStyle) || void 0 === u2 ? void 0 : u2.fillColor : void 0, null == r2 || null === (c2 = r2.rowsStyle) || void 0 === c2 || null === (c2 = c2.keyframesStyle) || void 0 === c2 ? void 0 : c2.fillColor);
        } }, { key: "keyframeSelectedFillColor", value: function(t3, n3, o2, r2) {
          var i2, l2, a2, s2, u2, c2, f2 = p.selectedFillColor || "";
          return e2.getFirstSet(f2, null == t3 || null === (i2 = t3.style) || void 0 === i2 ? void 0 : i2.selectedFillColor, null === (l2 = e2.getGroupStyle(n3)) || void 0 === l2 || null === (l2 = l2.keyframesStyle) || void 0 === l2 ? void 0 : l2.selectedFillColor, null == o2 || null === (a2 = o2.groupsStyle) || void 0 === a2 || null === (a2 = a2.keyframesStyle) || void 0 === a2 ? void 0 : a2.selectedFillColor, null == o2 || null === (s2 = o2.keyframesStyle) || void 0 === s2 ? void 0 : s2.selectedFillColor, n3 ? null == r2 || null === (u2 = r2.rowsStyle) || void 0 === u2 || null === (u2 = u2.groupsStyle) || void 0 === u2 || null === (u2 = u2.keyframesStyle) || void 0 === u2 ? void 0 : u2.selectedFillColor : void 0, null == r2 || null === (c2 = r2.rowsStyle) || void 0 === c2 || null === (c2 = c2.keyframesStyle) || void 0 === c2 ? void 0 : c2.selectedFillColor);
        } }, { key: "keyframeStrokeThickness", value: function(t3, n3, o2, r2) {
          var i2, l2, a2, s2, u2, c2, f2 = p.strokeThickness || 0;
          return e2.getFirstSet(f2, null == t3 || null === (i2 = t3.style) || void 0 === i2 ? void 0 : i2.strokeThickness, null === (l2 = e2.getGroupStyle(n3)) || void 0 === l2 || null === (l2 = l2.keyframesStyle) || void 0 === l2 ? void 0 : l2.strokeThickness, null == o2 || null === (a2 = o2.groupsStyle) || void 0 === a2 || null === (a2 = a2.keyframesStyle) || void 0 === a2 ? void 0 : a2.strokeThickness, null == o2 || null === (s2 = o2.keyframesStyle) || void 0 === s2 ? void 0 : s2.strokeThickness, n3 ? null == r2 || null === (u2 = r2.rowsStyle) || void 0 === u2 || null === (u2 = u2.groupsStyle) || void 0 === u2 || null === (u2 = u2.keyframesStyle) || void 0 === u2 ? void 0 : u2.strokeThickness : void 0, null == r2 || null === (c2 = r2.rowsStyle) || void 0 === c2 || null === (c2 = c2.keyframesStyle) || void 0 === c2 ? void 0 : c2.strokeThickness);
        } }, { key: "keyframeStrokeColor", value: function(t3, n3, o2, r2) {
          var i2, l2, a2, s2, u2, c2, f2 = p.strokeColor || "";
          return e2.getFirstSet(f2, null == t3 || null === (i2 = t3.style) || void 0 === i2 ? void 0 : i2.strokeColor, null === (l2 = e2.getGroupStyle(n3)) || void 0 === l2 || null === (l2 = l2.keyframesStyle) || void 0 === l2 ? void 0 : l2.strokeColor, null == o2 || null === (a2 = o2.groupsStyle) || void 0 === a2 || null === (a2 = a2.keyframesStyle) || void 0 === a2 ? void 0 : a2.strokeColor, null == o2 || null === (s2 = o2.keyframesStyle) || void 0 === s2 ? void 0 : s2.strokeColor, n3 ? null == r2 || null === (u2 = r2.rowsStyle) || void 0 === u2 || null === (u2 = u2.groupsStyle) || void 0 === u2 || null === (u2 = u2.keyframesStyle) || void 0 === u2 ? void 0 : u2.strokeColor : void 0, null == r2 || null === (c2 = r2.rowsStyle) || void 0 === c2 || null === (c2 = c2.keyframesStyle) || void 0 === c2 ? void 0 : c2.strokeColor);
        } }, { key: "keyframeSelectedStrokeColor", value: function(t3, n3, o2, r2) {
          var i2, l2, a2, s2, u2, c2, f2 = p.selectedStrokeColor || "";
          return e2.getFirstSet(f2, null == t3 || null === (i2 = t3.style) || void 0 === i2 ? void 0 : i2.selectedStrokeColor, null === (l2 = e2.getGroupStyle(n3)) || void 0 === l2 || null === (l2 = l2.keyframesStyle) || void 0 === l2 ? void 0 : l2.selectedStrokeColor, null == o2 || null === (a2 = o2.groupsStyle) || void 0 === a2 || null === (a2 = a2.keyframesStyle) || void 0 === a2 ? void 0 : a2.selectedStrokeColor, null == o2 || null === (s2 = o2.keyframesStyle) || void 0 === s2 ? void 0 : s2.selectedStrokeColor, n3 ? null == r2 || null === (u2 = r2.rowsStyle) || void 0 === u2 || null === (u2 = u2.groupsStyle) || void 0 === u2 || null === (u2 = u2.keyframesStyle) || void 0 === u2 ? void 0 : u2.selectedStrokeColor : void 0, null == r2 || null === (c2 = r2.rowsStyle) || void 0 === c2 || null === (c2 = c2.keyframesStyle) || void 0 === c2 ? void 0 : c2.selectedStrokeColor);
        } }, { key: "groupHeight", value: function(t3, n3, o2) {
          var r2, i2, l2;
          return e2.getFirstSet(y.height || "auto", null === (r2 = e2.getGroupStyle(n3)) || void 0 === r2 ? void 0 : r2.height, null == o2 || null === (i2 = o2.groupsStyle) || void 0 === i2 ? void 0 : i2.height, null == t3 || null === (l2 = t3.rowsStyle) || void 0 === l2 || null === (l2 = l2.groupsStyle) || void 0 === l2 ? void 0 : l2.height);
        } }, { key: "groupMarginTop", value: function(t3, n3, o2) {
          var r2, i2, l2;
          return e2.getFirstSet(y.marginTop || "auto", null === (r2 = e2.getGroupStyle(n3)) || void 0 === r2 ? void 0 : r2.marginTop, null == o2 || null === (i2 = o2.groupsStyle) || void 0 === i2 ? void 0 : i2.marginTop, null == t3 || null === (l2 = t3.rowsStyle) || void 0 === l2 || null === (l2 = l2.groupsStyle) || void 0 === l2 ? void 0 : l2.marginTop);
        } }, { key: "groupFillColor", value: function(t3, n3, o2) {
          var r2, i2, l2;
          return e2.getFirstSet(y.fillColor || "", null === (r2 = e2.getGroupStyle(n3)) || void 0 === r2 ? void 0 : r2.fillColor, null == o2 || null === (i2 = o2.groupsStyle) || void 0 === i2 ? void 0 : i2.fillColor, null == t3 || null === (l2 = t3.rowsStyle) || void 0 === l2 || null === (l2 = l2.groupsStyle) || void 0 === l2 ? void 0 : l2.fillColor);
        } }, { key: "groupStrokeColor", value: function(t3, n3, o2) {
          var r2, i2, l2;
          return e2.getFirstSet(y.strokeColor || "", null === (r2 = e2.getGroupStyle(n3)) || void 0 === r2 ? void 0 : r2.strokeColor, null == o2 || null === (i2 = o2.groupsStyle) || void 0 === i2 ? void 0 : i2.strokeColor, null == t3 || null === (l2 = t3.rowsStyle) || void 0 === l2 || null === (l2 = l2.groupsStyle) || void 0 === l2 ? void 0 : l2.strokeColor);
        } }, { key: "groupStrokeThickness", value: function(t3, n3, o2) {
          var r2, i2, l2;
          return e2.getFirstSet(y.strokeThickness || "", null === (r2 = e2.getGroupStyle(n3)) || void 0 === r2 ? void 0 : r2.strokeThickness, null == o2 || null === (i2 = o2.groupsStyle) || void 0 === i2 ? void 0 : i2.strokeThickness, null == t3 || null === (l2 = t3.rowsStyle) || void 0 === l2 || null === (l2 = l2.groupsStyle) || void 0 === l2 ? void 0 : l2.strokeThickness) || 0;
        } }, { key: "groupsRadii", value: function(t3, n3, o2) {
          var r2, i2, l2;
          return e2.getFirstSet(y.radii || "", null === (r2 = e2.getGroupStyle(n3)) || void 0 === r2 ? void 0 : r2.radii, null == o2 || null === (i2 = o2.groupsStyle) || void 0 === i2 ? void 0 : i2.radii, null == t3 || null === (l2 = t3.rowsStyle) || void 0 === l2 || null === (l2 = l2.groupsStyle) || void 0 === l2 ? void 0 : l2.radii) || 0;
        } }, { key: "getRowHeight", value: function(t3, n3) {
          var o2, r2 = _.height || 0;
          return e2.getFirstSet(r2, null == t3 ? void 0 : t3.height, null == n3 || null === (o2 = n3.rowsStyle) || void 0 === o2 ? void 0 : o2.height);
        } }, { key: "getRowMarginBottom", value: function(t3, n3) {
          var o2, r2 = _.marginBottom || 0;
          return e2.getFirstSet(r2, null == t3 ? void 0 : t3.marginBottom, null == n3 || null === (o2 = n3.rowsStyle) || void 0 === o2 ? void 0 : o2.marginBottom);
        } }, { key: "getRowFillColor", value: function(t3, n3) {
          var o2, r2 = _.fillColor || "";
          return e2.getFirstSet(r2, null == t3 ? void 0 : t3.fillColor, null == n3 || null === (o2 = n3.rowsStyle) || void 0 === o2 ? void 0 : o2.fillColor);
        } }, { key: "headerHeight", value: function(e3) {
          var t3 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 30;
          return (null == e3 ? void 0 : e3.headerHeight) || t3;
        } }, { key: "keyframeDraggable", value: function(t3, n3, o2, r2) {
          var i2, l2 = !(arguments.length > 4 && void 0 !== arguments[4]) || arguments[4];
          return e2.getValue(l2, true, null == t3 ? void 0 : t3.draggable, null === (i2 = e2.getGroup(n3)) || void 0 === i2 ? void 0 : i2.keyframesDraggable, null == o2 ? void 0 : o2.keyframesDraggable, null == r2 ? void 0 : r2.keyframesDraggable);
        } }, { key: "groupDraggable", value: function(t3, n3, o2) {
          var r2;
          return e2.getValue(true, true, null === (r2 = e2.getGroup(t3)) || void 0 === r2 ? void 0 : r2.draggable, null == n3 ? void 0 : n3.groupsDraggable, null == o2 ? void 0 : o2.groupsDraggable);
        } }], null, n2 && h(t2, n2), Object.defineProperty(t2, "prototype", { writable: false }), t2;
        var t2, n2;
      }(), w = function(e2) {
        return e2.Timeline = "timeline", e2.Keyframe = "keyframe", e2.Group = "group", e2.Row = "row", e2.None = "none", e2;
      }({});
      function k(e2) {
        return k = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e3) {
          return typeof e3;
        } : function(e3) {
          return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : typeof e3;
        }, k(e2);
      }
      function C(e2, t2) {
        for (var n2 = 0; n2 < t2.length; n2++) {
          var o2 = t2[n2];
          o2.enumerable = o2.enumerable || false, o2.configurable = true, "value" in o2 && (o2.writable = true), Object.defineProperty(e2, P(o2.key), o2);
        }
      }
      function x(e2, t2, n2) {
        return t2 && C(e2.prototype, t2), n2 && C(e2, n2), Object.defineProperty(e2, "prototype", { writable: false }), e2;
      }
      function M(e2, t2, n2) {
        return (t2 = P(t2)) in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
      }
      function P(e2) {
        var t2 = function(e3) {
          if ("object" != k(e3) || !e3) return e3;
          var t3 = e3[Symbol.toPrimitive];
          if (void 0 !== t3) {
            var n2 = t3.call(e3, "string");
            if ("object" != k(n2)) return n2;
            throw new TypeError("@@toPrimitive must return a primitive value.");
          }
          return String(e3);
        }(e2);
        return "symbol" == k(t2) ? t2 : t2 + "";
      }
      var T = x(function e2() {
        !function(e3, t2) {
          if (!(e3 instanceof t2)) throw new TypeError("Cannot call a class as a function");
        }(this, e2), M(this, "changed", false), M(this, "type", w.None);
      });
      function E(e2) {
        return E = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e3) {
          return typeof e3;
        } : function(e3) {
          return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : typeof e3;
        }, E(e2);
      }
      function D(e2, t2) {
        for (var n2 = 0; n2 < t2.length; n2++) {
          var o2 = t2[n2];
          o2.enumerable = o2.enumerable || false, o2.configurable = true, "value" in o2 && (o2.writable = true), Object.defineProperty(e2, O(o2.key), o2);
        }
      }
      function O(e2) {
        var t2 = function(e3) {
          if ("object" != E(e3) || !e3) return e3;
          var t3 = e3[Symbol.toPrimitive];
          if (void 0 !== t3) {
            var n2 = t3.call(e3, "string");
            if ("object" != E(n2)) return n2;
            throw new TypeError("@@toPrimitive must return a primitive value.");
          }
          return String(e3);
        }(e2);
        return "symbol" == E(t2) ? t2 : t2 + "";
      }
      var R = function() {
        return e2 = function e3() {
          var t3, n2, o2;
          !function(e4, t4) {
            if (!(e4 instanceof t4)) throw new TypeError("Cannot call a class as a function");
          }(this, e3), t3 = this, o2 = false, (n2 = O(n2 = "_prevented")) in t3 ? Object.defineProperty(t3, n2, { value: o2, enumerable: true, configurable: true, writable: true }) : t3[n2] = o2;
        }, (t2 = [{ key: "preventDefault", value: function() {
          this._prevented = true;
        } }, { key: "isPrevented", value: function() {
          return this._prevented;
        } }]) && D(e2.prototype, t2), Object.defineProperty(e2, "prototype", { writable: false }), e2;
        var e2, t2;
      }();
      function j(e2) {
        return j = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e3) {
          return typeof e3;
        } : function(e3) {
          return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : typeof e3;
        }, j(e2);
      }
      function N(e2, t2, n2) {
        return t2 = A(t2), function(e3, t3) {
          if (t3 && ("object" == j(t3) || "function" == typeof t3)) return t3;
          if (void 0 !== t3) throw new TypeError("Derived constructors may only return object or undefined");
          return function(e4) {
            if (void 0 === e4) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e4;
          }(e3);
        }(e2, z() ? Reflect.construct(t2, n2 || [], A(e2).constructor) : t2.apply(e2, n2));
      }
      function z() {
        try {
          var e2 = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
          }));
        } catch (e3) {
        }
        return (z = function() {
          return !!e2;
        })();
      }
      function A(e2) {
        return A = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e3) {
          return e3.__proto__ || Object.getPrototypeOf(e3);
        }, A(e2);
      }
      function K(e2, t2) {
        return K = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e3, t3) {
          return e3.__proto__ = t3, e3;
        }, K(e2, t2);
      }
      var V = function(e2) {
        function t2() {
          return function(e3, t3) {
            if (!(e3 instanceof t3)) throw new TypeError("Cannot call a class as a function");
          }(this, t2), N(this, t2, arguments);
        }
        return function(e3, t3) {
          if ("function" != typeof t3 && null !== t3) throw new TypeError("Super expression must either be null or a function");
          e3.prototype = Object.create(t3 && t3.prototype, { constructor: { value: e3, writable: true, configurable: true } }), Object.defineProperty(e3, "prototype", { writable: false }), t3 && K(e3, t3);
        }(t2, e2), n2 = t2, Object.defineProperty(n2, "prototype", { writable: false }), n2;
        var n2;
      }(R), W = function(e2) {
        return e2.User = "user", e2.Programmatically = "programmatically", e2.SetTimeMethod = "setTimeMethod", e2;
      }({});
      function F(e2) {
        return F = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e3) {
          return typeof e3;
        } : function(e3) {
          return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : typeof e3;
        }, F(e2);
      }
      function L(e2, t2, n2) {
        return t2 = I(t2), function(e3, t3) {
          if (t3 && ("object" == F(t3) || "function" == typeof t3)) return t3;
          if (void 0 !== t3) throw new TypeError("Derived constructors may only return object or undefined");
          return function(e4) {
            if (void 0 === e4) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e4;
          }(e3);
        }(e2, B() ? Reflect.construct(t2, n2 || [], I(e2).constructor) : t2.apply(e2, n2));
      }
      function B() {
        try {
          var e2 = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
          }));
        } catch (e3) {
        }
        return (B = function() {
          return !!e2;
        })();
      }
      function I(e2) {
        return I = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e3) {
          return e3.__proto__ || Object.getPrototypeOf(e3);
        }, I(e2);
      }
      function H(e2, t2) {
        return H = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e3, t3) {
          return e3.__proto__ = t3, e3;
        }, H(e2, t2);
      }
      function G(e2, t2, n2) {
        return (t2 = Z(t2)) in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
      }
      function Z(e2) {
        var t2 = function(e3) {
          if ("object" != F(e3) || !e3) return e3;
          var t3 = e3[Symbol.toPrimitive];
          if (void 0 !== t3) {
            var n2 = t3.call(e3, "string");
            if ("object" != F(n2)) return n2;
            throw new TypeError("@@toPrimitive must return a primitive value.");
          }
          return String(e3);
        }(e2);
        return "symbol" == F(t2) ? t2 : t2 + "";
      }
      var U = function(e2) {
        function t2() {
          var e3;
          !function(e4, t3) {
            if (!(e4 instanceof t3)) throw new TypeError("Cannot call a class as a function");
          }(this, t2);
          for (var n3 = arguments.length, o2 = new Array(n3), r2 = 0; r2 < n3; r2++) o2[r2] = arguments[r2];
          return G(e3 = L(this, t2, [].concat(o2)), "val", 0), G(e3, "prevVal", 0), G(e3, "source", W.User), e3;
        }
        return function(e3, t3) {
          if ("function" != typeof t3 && null !== t3) throw new TypeError("Super expression must either be null or a function");
          e3.prototype = Object.create(t3 && t3.prototype, { constructor: { value: e3, writable: true, configurable: true } }), Object.defineProperty(e3, "prototype", { writable: false }), t3 && H(e3, t3);
        }(t2, e2), n2 = t2, Object.defineProperty(n2, "prototype", { writable: false }), n2;
        var n2;
      }(R), X = function(e2) {
        return e2.Keyframes = "keyframes", e2;
      }({});
      function Y(e2) {
        return Y = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e3) {
          return typeof e3;
        } : function(e3) {
          return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : typeof e3;
        }, Y(e2);
      }
      function J(e2, t2) {
        for (var n2 = 0; n2 < t2.length; n2++) {
          var o2 = t2[n2];
          o2.enumerable = o2.enumerable || false, o2.configurable = true, "value" in o2 && (o2.writable = true), Object.defineProperty(e2, Q(o2.key), o2);
        }
      }
      function q(e2, t2, n2) {
        return t2 && J(e2.prototype, t2), n2 && J(e2, n2), Object.defineProperty(e2, "prototype", { writable: false }), e2;
      }
      function $(e2, t2, n2) {
        return (t2 = Q(t2)) in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
      }
      function Q(e2) {
        var t2 = function(e3) {
          if ("object" != Y(e3) || !e3) return e3;
          var t3 = e3[Symbol.toPrimitive];
          if (void 0 !== t3) {
            var n2 = t3.call(e3, "string");
            if ("object" != Y(n2)) return n2;
            throw new TypeError("@@toPrimitive must return a primitive value.");
          }
          return String(e3);
        }(e2);
        return "symbol" == Y(t2) ? t2 : t2 + "";
      }
      var ee = q(function e2() {
        !function(e3, t2) {
          if (!(e3 instanceof t2)) throw new TypeError("Cannot call a class as a function");
        }(this, e2), $(this, "selected", []), $(this, "changed", []), $(this, "mode", X.Keyframes);
      });
      function te(e2) {
        return te = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e3) {
          return typeof e3;
        } : function(e3) {
          return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : typeof e3;
        }, te(e2);
      }
      function ne(e2, t2) {
        for (var n2 = 0; n2 < t2.length; n2++) {
          var o2 = t2[n2];
          o2.enumerable = o2.enumerable || false, o2.configurable = true, "value" in o2 && (o2.writable = true), Object.defineProperty(e2, se(o2.key), o2);
        }
      }
      function oe(e2, t2, n2) {
        return t2 = ie(t2), function(e3, t3) {
          if (t3 && ("object" == te(t3) || "function" == typeof t3)) return t3;
          if (void 0 !== t3) throw new TypeError("Derived constructors may only return object or undefined");
          return function(e4) {
            if (void 0 === e4) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e4;
          }(e3);
        }(e2, re() ? Reflect.construct(t2, n2 || [], ie(e2).constructor) : t2.apply(e2, n2));
      }
      function re() {
        try {
          var e2 = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
          }));
        } catch (e3) {
        }
        return (re = function() {
          return !!e2;
        })();
      }
      function ie(e2) {
        return ie = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e3) {
          return e3.__proto__ || Object.getPrototypeOf(e3);
        }, ie(e2);
      }
      function le(e2, t2) {
        return le = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e3, t3) {
          return e3.__proto__ = t3, e3;
        }, le(e2, t2);
      }
      function ae(e2, t2, n2) {
        return (t2 = se(t2)) in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
      }
      function se(e2) {
        var t2 = function(e3) {
          if ("object" != te(e3) || !e3) return e3;
          var t3 = e3[Symbol.toPrimitive];
          if (void 0 !== t3) {
            var n2 = t3.call(e3, "string");
            if ("object" != te(n2)) return n2;
            throw new TypeError("@@toPrimitive must return a primitive value.");
          }
          return String(e3);
        }(e2);
        return "symbol" == te(t2) ? t2 : t2 + "";
      }
      var ue = function(e2) {
        function t2() {
          var e3;
          !function(e4, t3) {
            if (!(e4 instanceof t3)) throw new TypeError("Cannot call a class as a function");
          }(this, t2);
          for (var n3 = arguments.length, o3 = new Array(n3), r2 = 0; r2 < n3; r2++) o3[r2] = arguments[r2];
          return ae(e3 = oe(this, t2, [].concat(o3)), "args", null), ae(e3, "elements", []), ae(e3, "target", null), ae(e3, "point", null), e3;
        }
        return function(e3, t3) {
          if ("function" != typeof t3 && null !== t3) throw new TypeError("Super expression must either be null or a function");
          e3.prototype = Object.create(t3 && t3.prototype, { constructor: { value: e3, writable: true, configurable: true } }), Object.defineProperty(e3, "prototype", { writable: false }), t3 && le(e3, t3);
        }(t2, e2), n2 = t2, (o2 = [{ key: "pos", get: function() {
          var e3;
          return (null === (e3 = this.point) || void 0 === e3 ? void 0 : e3.pos) || null;
        } }, { key: "val", get: function() {
          return this.point ? this.point.val : NaN;
        } }]) && ne(n2.prototype, o2), Object.defineProperty(n2, "prototype", { writable: false }), n2;
        var n2, o2;
      }(R);
      function ce(e2) {
        return ce = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e3) {
          return typeof e3;
        } : function(e3) {
          return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : typeof e3;
        }, ce(e2);
      }
      function fe(e2, t2) {
        for (var n2 = 0; n2 < t2.length; n2++) {
          var o2 = t2[n2];
          o2.enumerable = o2.enumerable || false, o2.configurable = true, "value" in o2 && (o2.writable = true), Object.defineProperty(e2, he(o2.key), o2);
        }
      }
      function de(e2, t2, n2) {
        return t2 = ye(t2), function(e3, t3) {
          if (t3 && ("object" == ce(t3) || "function" == typeof t3)) return t3;
          if (void 0 !== t3) throw new TypeError("Derived constructors may only return object or undefined");
          return function(e4) {
            if (void 0 === e4) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e4;
          }(e3);
        }(e2, ve() ? Reflect.construct(t2, n2 || [], ye(e2).constructor) : t2.apply(e2, n2));
      }
      function ve() {
        try {
          var e2 = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
          }));
        } catch (e3) {
        }
        return (ve = function() {
          return !!e2;
        })();
      }
      function ye(e2) {
        return ye = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e3) {
          return e3.__proto__ || Object.getPrototypeOf(e3);
        }, ye(e2);
      }
      function pe(e2, t2) {
        return pe = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e3, t3) {
          return e3.__proto__ = t3, e3;
        }, pe(e2, t2);
      }
      function _e(e2, t2, n2) {
        return (t2 = he(t2)) in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
      }
      function he(e2) {
        var t2 = function(e3) {
          if ("object" != ce(e3) || !e3) return e3;
          var t3 = e3[Symbol.toPrimitive];
          if (void 0 !== t3) {
            var n2 = t3.call(e3, "string");
            if ("object" != ce(n2)) return n2;
            throw new TypeError("@@toPrimitive must return a primitive value.");
          }
          return String(e3);
        }(e2);
        return "symbol" == ce(t2) ? t2 : t2 + "";
      }
      var me = function(e2) {
        function t2() {
          var e3;
          !function(e4, t3) {
            if (!(e4 instanceof t3)) throw new TypeError("Cannot call a class as a function");
          }(this, t2);
          for (var n3 = arguments.length, o3 = new Array(n3), r2 = 0; r2 < n3; r2++) o3[r2] = arguments[r2];
          return _e(e3 = de(this, t2, [].concat(o3)), "args", null), _e(e3, "elements", null), _e(e3, "target", null), _e(e3, "point", null), _e(e3, "prevPoint", null), e3;
        }
        return function(e3, t3) {
          if ("function" != typeof t3 && null !== t3) throw new TypeError("Super expression must either be null or a function");
          e3.prototype = Object.create(t3 && t3.prototype, { constructor: { value: e3, writable: true, configurable: true } }), Object.defineProperty(e3, "prototype", { writable: false }), t3 && pe(e3, t3);
        }(t2, e2), n2 = t2, (o2 = [{ key: "pos", get: function() {
          var e3;
          return (null === (e3 = this.point) || void 0 === e3 ? void 0 : e3.pos) || null;
        } }]) && fe(n2.prototype, o2), Object.defineProperty(n2, "prototype", { writable: false }), n2;
        var n2, o2;
      }(R), ge = function(e2) {
        return e2.Selection = "selection", e2.Pan = "pan", e2.NonInteractivePan = "nonInteractivePan", e2.Zoom = "zoom", e2.None = "none", e2;
      }({}), be = function(e2) {
        return e2.Alias = "alias", e2.AllScroll = "all-scroll", e2.Auto = "auto", e2.Cell = "cell", e2.ContextMenu = "context-menu", e2.ColResize = "col-resize", e2.Copy = "copy", e2.Crosshair = "crosshair", e2.Default = "default", e2.EResize = "e-resize", e2.EWResize = "ew-resize", e2.Grab = "grab", e2.Grabbing = "grabbing", e2.Help = "help", e2.Move = "move", e2.NResize = "n-resize", e2.NEResize = "ne-resize", e2.NESWResize = "nesw-resize", e2.NSResize = "ns-resize", e2.NWResize = "nw-resize", e2.NWSEResize = "nwse-resize", e2.NoDrop = "no-drop", e2.None = "none", e2.NotAllowed = "not-allowed", e2.Pointer = "pointer", e2.Progress = "progress", e2.RowResize = "row-resize", e2.SResize = "s-resize", e2.SEResize = "se-resize", e2.SWResize = "sw-resize", e2.Text = "text", e2.WResize = "w-resize", e2.Wait = "wait", e2.ZoomIn = "zoom-in", e2.ZoomOut = "zoom-out", e2;
      }({}), Se = function(e2) {
        return e2.None = "none", e2.Triangle = "triangle", e2.Rect = "rect", e2;
      }({}), we = function(e2) {
        return e2.Normal = "normal", e2.Append = "append", e2.Revert = "revert", e2;
      }({}), ke = function(e2) {
        return e2.Selected = "selected", e2.TimeChanged = "timechanged", e2.KeyframeChanged = "keyframeChanged", e2.DragStarted = "dragStarted", e2.Drag = "drag", e2.DragFinished = "dragFinished", e2.Scroll = "scroll", e2.ScrollFinished = "scrollFinished", e2.ContextMenu = "onContextMenu", e2.DoubleClick = "doubleClick", e2.MouseDown = "mouseDown", e2;
      }({}), Ce = function(e2) {
        return e2.DefaultMode = "none", e2.ZoomMode = "zoom", e2.ScrollBySelection = "scrollBySelection", e2;
      }({}), xe = { autoPanSpeed: 50, scrollByDragSpeed: 0.12, clickDetectionMs: 120, doubleClickTimeoutMs: 400, scrollFinishedTimeoutMs: 500, autoPanByScrollPadding: 10, clickThreshold: 3, clickDetectionMinRadius: 2, autoPanSpeedLimit: 10, defaultGroupHeight: 0.7 }, Me = { width: 2, marginTop: 15, marginBottom: 0, strokeColor: "DarkOrange", fillColor: "DarkOrange", capStyle: { width: 4, height: 10, capType: Se.Rect, strokeColor: "DarkOrange", fillColor: "DarkOrange" }, cursor: be.EWResize }, Pe = { snapAllKeyframesOnMove: false, snapEnabled: true, timelineStyle: Me, stepPx: 120, stepVal: 1e3, stepSmallPx: 30, snapStep: 200, leftMargin: 25, headerFillColor: "#101011", fillColor: "#101011", labelsColor: "#D5D5D5", tickColor: "#D5D5D5", selectionColor: "White", rowsStyle: _, keyframesStyle: p, groupsStyle: y, headerHeight: 30, font: "11px sans-serif", zoom: 1, zoomSpeed: 0.1, zoomMin: 0.1, zoomMax: 8, controlKeyIsMetaKey: false, scrollContainerClass: "scroll-container", groupsDraggable: true, keyframesDraggable: true, timelineDraggable: true, min: 0, max: Number.MAX_VALUE };
      function Te(e2) {
        return Te = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e3) {
          return typeof e3;
        } : function(e3) {
          return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : typeof e3;
        }, Te(e2);
      }
      function Ee(e2, t2) {
        (null == t2 || t2 > e2.length) && (t2 = e2.length);
        for (var n2 = 0, o2 = Array(t2); n2 < t2; n2++) o2[n2] = e2[n2];
        return o2;
      }
      function De(e2, t2) {
        for (var n2 = 0; n2 < t2.length; n2++) {
          var o2 = t2[n2];
          o2.enumerable = o2.enumerable || false, o2.configurable = true, "value" in o2 && (o2.writable = true), Object.defineProperty(e2, Ke(o2.key), o2);
        }
      }
      function Oe(e2, t2, n2) {
        return t2 = ze(t2), function(e3, t3) {
          if (t3 && ("object" == Te(t3) || "function" == typeof t3)) return t3;
          if (void 0 !== t3) throw new TypeError("Derived constructors may only return object or undefined");
          return function(e4) {
            if (void 0 === e4) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e4;
          }(e3);
        }(e2, Re() ? Reflect.construct(t2, n2 || [], ze(e2).constructor) : t2.apply(e2, n2));
      }
      function Re() {
        try {
          var e2 = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
          }));
        } catch (e3) {
        }
        return (Re = function() {
          return !!e2;
        })();
      }
      function je(e2, t2) {
        return je = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e3, t3) {
          return e3.__proto__ = t3, e3;
        }, je(e2, t2);
      }
      function Ne() {
        return Ne = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function(e2, t2, n2) {
          var o2 = function(e3, t3) {
            for (; !{}.hasOwnProperty.call(e3, t3) && null !== (e3 = ze(e3)); ) ;
            return e3;
          }(e2, t2);
          if (o2) {
            var r2 = Object.getOwnPropertyDescriptor(o2, t2);
            return r2.get ? r2.get.call(arguments.length < 3 ? e2 : n2) : r2.value;
          }
        }, Ne.apply(null, arguments);
      }
      function ze(e2) {
        return ze = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e3) {
          return e3.__proto__ || Object.getPrototypeOf(e3);
        }, ze(e2);
      }
      function Ae(e2, t2, n2) {
        return (t2 = Ke(t2)) in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
      }
      function Ke(e2) {
        var t2 = function(e3) {
          if ("object" != Te(e3) || !e3) return e3;
          var t3 = e3[Symbol.toPrimitive];
          if (void 0 !== t3) {
            var n2 = t3.call(e3, "string");
            if ("object" != Te(n2)) return n2;
            throw new TypeError("@@toPrimitive must return a primitive value.");
          }
          return String(e3);
        }(e2);
        return "symbol" == Te(t2) ? t2 : t2 + "";
      }
      var Ve = function(e2) {
        function t2() {
          var e3, n3 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null, o3 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;
          return function(e4, t3) {
            if (!(e4 instanceof t3)) throw new TypeError("Cannot call a class as a function");
          }(this, t2), Ae(e3 = Oe(this, t2), "_container", null), Ae(e3, "_canvas", null), Ae(e3, "_scrollContainer", null), Ae(e3, "_scrollContent", null), Ae(e3, "_ctx", null), Ae(e3, "_startPosMouseArgs", null), Ae(e3, "_scrollStartPos", null), Ae(e3, "_currentPos", null), Ae(e3, "_selectionRect", null), Ae(e3, "_selectionRectEnabled", false), Ae(e3, "_drag", null), Ae(e3, "_startedDragWithCtrl", false), Ae(e3, "_startedDragWithShiftKey", false), Ae(e3, "_scrollProgrammatically", false), Ae(e3, "_clickTimeout", null), Ae(e3, "_lastClickTime", 0), Ae(e3, "_lastClickPoint", null), Ae(e3, "_consts", xe), Ae(e3, "_clickAllowed", false), Ae(e3, "_scrollFinishedTimerRef", null), Ae(e3, "_val", 0), Ae(e3, "_pixelRatio", 1), Ae(e3, "_currentZoom", 0), Ae(e3, "_intervalRef", null), Ae(e3, "_autoPanLastActionDate", 0), Ae(e3, "_isPanStarted", false), Ae(e3, "_interactionMode", ge.Selection), Ae(e3, "_lastUsedArgs", null), Ae(e3, "_model", null), Ae(e3, "_scrollAreaClickOrDragStarted", false), Ae(e3, "initialize", function(t3, n4) {
            if (e3._model = n4, !t3 || !t3.id) throw new Error("Element cannot be empty. Should be string or DOM element.");
            e3._generateContainers(t3.id), e3._options = d.cloneOptions(Pe), t3 && (e3._options = e3._setOptions(t3)), e3._subscribeComponentEvents(), e3.rescale(), e3.redraw();
          }), Ae(e3, "_generateContainers", function(t3) {
            if (t3 instanceof HTMLElement ? e3._container = t3 : e3._container = document.getElementById(t3), !e3._container) throw new Error("Element cannot be empty. Should be string or DOM element.");
            if (e3._scrollContainer = document.createElement("div"), e3._scrollContent = document.createElement("div"), e3._canvas = document.createElement("canvas"), e3._canvas && e3._canvas.getContext) {
              e3._container.innerHTML = "", e3._container.style.position = "relative", e3._canvas.style.cssText = "image-rendering: -moz-crisp-edges;image-rendering: -webkit-crisp-edges;image-rendering: pixelated;image-rendering: crisp-edges;user-select: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-o-user-select: none;user-select: none;touch-action: none;position: relative;-webkit-user-drag: none;-khtml-user-drag: none;-moz-user-drag: none;-o-user-drag: none;user-drag: none;padding: inherit", e3._scrollContainer.style.cssText = "overflow: scroll;position: absolute;width:  100%;height:  100%;", e3._scrollContent.style.width = e3._scrollContent.style.height = "100%", e3._scrollContainer.appendChild(e3._scrollContent), e3._container.appendChild(e3._scrollContainer);
              var n4 = e3._scrollContainer.offsetWidth - e3._scrollContent.clientWidth;
              e3._canvas.style.width = e3._canvas.style.height = "calc(100% -" + (n4 || 17) + "px)", e3._container.appendChild(e3._canvas), e3._ctx = e3._getCtx();
            } else console.log("Cannot initialize canvas context.");
          }), Ae(e3, "_subscribeComponentEvents", function() {
            if (e3._unsubscribeComponentEvents(), !e3._container || !e3._scrollContainer || !e3._canvas) throw Error("Cannot subscribe on scroll events while one of the containers is null or empty. Please call initialize method first");
            e3._container && e3._container.addEventListener("wheel", e3._handleWheelEvent), e3._scrollContainer && (e3._scrollContainer.addEventListener("scroll", e3._handleScrollEvent), e3._scrollContainer.addEventListener("touchstart", e3._handleScrollMouseDownEvent), e3._scrollContainer.addEventListener("mousedown", e3._handleScrollMouseDownEvent)), document.addEventListener("keyup", e3._handleKeyUp, false), document.addEventListener("keydown", e3._handleKeyDown, false), window.addEventListener("blur", e3._handleBlurEvent, false), window.addEventListener("resize", e3._handleWindowResizeEvent, false), e3._canvas && (e3._canvas.addEventListener("touchstart", e3._handleMouseDownEvent, false), e3._canvas.addEventListener("mousedown", e3._handleMouseDownEvent, false), e3._canvas.addEventListener("contextmenu", e3._handleContextMenu, false)), window.addEventListener("mousemove", e3._handleMouseMoveEvent, false), window.addEventListener("touchmove", e3._handleMouseMoveEvent, false), window.addEventListener("mouseup", e3._handleMouseUpEvent, false), window.addEventListener("touchend", e3._handleMouseUpEvent, false);
          }), Ae(e3, "_unsubscribeComponentEvents", function() {
            var t3;
            null === (t3 = e3._container) || void 0 === t3 || t3.removeEventListener("wheel", e3._handleWheelEvent), e3._scrollContainer ? (e3._scrollContainer.removeEventListener("scroll", e3._handleScrollEvent), e3._scrollContainer.removeEventListener("touchstart", e3._handleScrollMouseDownEvent), e3._scrollContainer.removeEventListener("mousedown", e3._handleScrollMouseDownEvent)) : console.warn("Cannot unsubscribe scroll while it's already empty"), window.removeEventListener("blur", e3._handleBlurEvent), window.removeEventListener("resize", e3._handleWindowResizeEvent), document.removeEventListener("keydown", e3._handleKeyDown), document.removeEventListener("keyup", e3._handleKeyUp), e3._canvas ? (e3._canvas.removeEventListener("touchstart", e3._handleMouseDownEvent), e3._canvas.removeEventListener("mousedown", e3._handleMouseDownEvent), e3._canvas.removeEventListener("contextmenu", e3._handleContextMenu)) : console.warn("Cannot unsubscribe canvas while it's already empty"), window.removeEventListener("mousemove", e3._handleMouseMoveEvent), window.removeEventListener("touchmove", e3._handleMouseMoveEvent), window.removeEventListener("mouseup", e3._handleMouseUpEvent), window.removeEventListener("touchend", e3._handleMouseUpEvent);
          }), Ae(e3, "dispose", function() {
            e3.offAll(), e3._stopAutoPan(), e3._clearScrollFinishedTimer(), e3._unsubscribeComponentEvents(), e3._container && (e3._container.innerHTML = ""), e3._container = null, e3._canvas = null, e3._scrollContainer = null, e3._scrollContent = null, e3._ctx = null, e3._cleanUpSelection();
          }), Ae(e3, "_handleKeyUp", function(t3) {
            e3._interactionMode === ge.Zoom && e3._setZoomCursor(t3);
          }), Ae(e3, "_handleKeyDown", function(t3) {
            e3._interactionMode === ge.Zoom && e3._setZoomCursor(t3);
          }), Ae(e3, "_setZoomCursor", function(t3) {
            e3._controlKeyPressed(t3) ? e3._setCursor(be.ZoomOut) : e3._setCursor(be.ZoomIn);
          }), Ae(e3, "_handleBlurEvent", function() {
            e3._cleanUpSelection(true);
          }), Ae(e3, "_handleWindowResizeEvent", function() {
            e3.rescale(), e3.redraw();
          }), Ae(e3, "_clearScrollFinishedTimer", function() {
            e3._scrollFinishedTimerRef && (clearTimeout(e3._scrollFinishedTimerRef), e3._scrollFinishedTimerRef = null);
          }), Ae(e3, "_handleScrollMouseDownEvent", function() {
            e3._scrollAreaClickOrDragStarted = true;
          }), Ae(e3, "_handleScrollEvent", function(t3) {
            var n4 = e3._scrollProgrammatically;
            e3._scrollProgrammatically && (e3._scrollProgrammatically = false), e3._clearScrollFinishedTimer(), e3._scrollFinishedTimerRef = window.setTimeout(function() {
              e3._isPanStarted || (e3._clearScrollFinishedTimer(), e3.rescale(), e3.redraw()), e3._emitScrollEvent(t3, n4, ke.ScrollFinished);
            }, e3._consts.scrollFinishedTimeoutMs), e3.redraw(), e3._emitScrollEvent(t3, n4);
          }), Ae(e3, "_controlKeyPressed", function(t3) {
            return e3._options && void 0 !== e3._options.controlKeyIsMetaKey ? e3._options.controlKeyIsMetaKey || e3._options.controlKeyIsMetaKey ? t3.metaKey : t3.ctrlKey : t3.metaKey || t3.ctrlKey;
          }), Ae(e3, "_handleWheelEvent", function(t3) {
            if (e3._scrollContainer && e3._canvas) if (e3._controlKeyPressed(t3)) {
              t3.preventDefault();
              var n4 = e3._getMousePos(e3._canvas, t3), o4 = Math.max(0, n4.pos.x || 0);
              e3._zoom(d.sign(t3.deltaY), e3._options.zoomSpeed || 0, o4);
            } else e3.scrollTop = e3._scrollContainer.scrollTop + t3.deltaY, t3.preventDefault();
          }), Ae(e3, "_zoom", function(t3, n4, o4) {
            if (n4 && n4 > 0 && n4 <= 1) {
              o4 += 0.2 * d.getDistance(e3._canvasClientWidth() / 2, o4);
              var r2 = e3._canvasClientWidth() / o4, i2 = e3._fromScreen(o4), l2 = t3 * e3._currentZoom * n4;
              e3._currentZoom = e3._setZoom(e3._currentZoom + l2);
              var a2 = e3.valToPx(i2), s2 = Math.round(a2 - e3._canvasClientWidth() / r2);
              s2 <= 0 && (s2 = 0), e3._rescaleInternal(s2 + e3._canvasClientWidth(), null, Ce.ZoomMode), e3.scrollLeft = s2, e3.redraw();
            }
          }), Ae(e3, "zoomIn", function() {
            var t3, n4 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : e3._options.zoomSpeed, o4 = (null === (t3 = e3._scrollContainer) || void 0 === t3 ? void 0 : t3.clientWidth) || 0;
            n4 && o4 && e3._zoom(1, n4, o4 / 2);
          }), Ae(e3, "zoomOut", function() {
            var t3, n4 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : e3._options.zoomSpeed, o4 = (null === (t3 = e3._scrollContainer) || void 0 === t3 ? void 0 : t3.clientWidth) || 0;
            n4 && o4 && e3._zoom(-1, n4, o4 / 2);
          }), Ae(e3, "_setZoom", function(t3) {
            var n4, o4, r2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, i2 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null;
            return r2 = d.isNumber(r2) ? r2 : null === (n4 = e3._options) || void 0 === n4 ? void 0 : n4.zoomMin, i2 = d.isNumber(i2) ? i2 : null === (o4 = e3._options) || void 0 === o4 ? void 0 : o4.zoomMax, d.isNumber(t3) ? (t3 = (t3 = d.keepInBounds(t3, r2, i2)) || 1, e3._currentZoom = t3, t3) : t3;
          }), Ae(e3, "setZoom", function(t3) {
            var n4 = e3.getZoom();
            if (n4 !== t3) {
              var o4 = e3._setZoom(t3);
              if (n4 != o4) return e3.rescale(), e3.redraw(), o4;
            }
            return n4;
          }), Ae(e3, "getZoom", function() {
            return d.isNumber(e3._currentZoom) && e3._currentZoom || 1;
          }), Ae(e3, "_getClickDetectionRadius", function(t3) {
            var n4 = e3._consts.clickDetectionMinRadius || 1;
            return Math.max(n4, (null == t3 ? void 0 : t3.radius) || n4);
          }), Ae(e3, "_handleContextMenu", function(n4) {
            if (d.clearBrowserSelection(), e3._canvas && e3._scrollContainer) {
              var o4 = e3._trackMousePos(e3._canvas, n4), r2 = e3._getClickDetectionRadius(o4), i2 = e3.elementFromPoint(o4.pos, r2, []), l2 = e3._findDraggableElement(i2, o4.val), a2 = new ue();
              a2.point = o4, a2.args = n4, a2.elements = i2, a2.target = l2, Ne(ze(t2.prototype), "emit", e3).call(e3, ke.ContextMenu, a2);
            } else e3._cleanUpSelection();
          }), Ae(e3, "_handleMouseDownEvent", function(n4) {
            if (d.clearBrowserSelection(), e3._canvas && e3._scrollContainer) {
              if (e3._startPosMouseArgs = e3._trackMousePos(e3._canvas, n4), e3._startPosMouseArgs) {
                var o4 = Date.now() - e3._lastClickTime < e3._consts.doubleClickTimeoutMs;
                e3._lastClickPoint && e3._startPosMouseArgs && d.getDistance(e3._lastClickPoint.x, e3._lastClickPoint.y, e3._startPosMouseArgs.pos.x, e3._startPosMouseArgs.pos.y) > e3._consts.clickThreshold && (o4 = false), e3._lastClickPoint = e3._startPosMouseArgs.pos, e3._scrollStartPos = { x: e3._scrollContainer.scrollLeft, y: e3._scrollContainer.scrollTop }, e3._clickAllowed = true;
                var r2 = null;
                e3._interactionMode !== ge.NonInteractivePan && e3._interactionMode !== ge.None || (r2 = [w.Timeline]);
                var i2 = e3._getClickDetectionRadius(e3._startPosMouseArgs), l2 = e3.elementFromPoint(e3._startPosMouseArgs.pos, i2, r2), a2 = e3._findDraggableElement(l2, e3._startPosMouseArgs.val), s2 = new ue();
                if (s2.point = e3._startPosMouseArgs, s2.args = n4, s2.elements = l2, s2.target = a2, o4) Ne(ze(t2.prototype), "emit", e3).call(e3, ke.DoubleClick, s2);
                else if (Ne(ze(t2.prototype), "emit", e3).call(e3, ke.MouseDown, s2), e3._clickTimeout = Date.now(), e3._lastClickTime = Date.now(), s2.isPrevented()) e3._cleanUpSelection();
                else {
                  var u2;
                  if (e3._currentPos = e3._startPosMouseArgs, a2 && e3._interactionMode !== ge.Zoom) if (e3._drag = new T(), e3._drag.val = a2.val, e3._drag.type = a2.type, e3._drag.target = e3._setElementDragState(a2, a2.val), a2.type === w.Keyframe) e3._startedDragWithCtrl = e3._controlKeyPressed(n4), e3._startedDragWithShiftKey = n4.shiftKey, null == a2 || !a2.keyframe || null != a2 && null !== (u2 = a2.keyframe) && void 0 !== u2 && u2.selected || e3._controlKeyPressed(n4) || e3._selectInternal(a2.keyframe), e3._drag.elements = e3.getSelectedElements().map(function(t3) {
                    return e3._setElementDragState(t3, t3.val);
                  });
                  else if (a2.type === w.Group) {
                    var c2 = e3._drag.target.keyframes;
                    c2 && Array.isArray(c2) && (e3._drag.elements = c2.map(function(t3) {
                      var n5;
                      return e3._setElementDragState(e3._convertToTimelineElement((null === (n5 = e3._drag) || void 0 === n5 ? void 0 : n5.target.row) || null, t3), t3.val);
                    }));
                  } else e3._drag.elements = [e3._drag.target];
                  e3.redraw();
                }
              }
            } else e3._cleanUpSelection();
          }), Ae(e3, "_setElementDragState", function(e4, t3) {
            var n4 = e4;
            return n4.prevVal = n4.val, void 0 !== n4.startedVal && null !== n4.startedVal || (n4.startedVal = t3), void 0 !== n4.prevVal && null !== n4.prevVal || (n4.prevVal = t3), n4.val = t3, n4;
          }), Ae(e3, "isLeftButtonClicked", function(e4) {
            return !!e4 && 1 == e4.buttons;
          }), Ae(e3, "_handleMouseMoveEvent", function(t3) {
            if (t3 ? e3._lastUsedArgs = t3 : t3 = e3._lastUsedArgs, t3 && e3._canvas) {
              var n4 = t3, o4 = n4.changedTouches && n4.changedTouches.length > 0;
              e3._currentPos = e3._trackMousePos(e3._canvas, t3), !e3._isPanStarted && e3._selectionRect && e3._clickTimeoutIsOver() ? e3._interactionMode === ge.None || e3._interactionMode === ge.Zoom || e3._interactionMode === ge.NonInteractivePan ? e3._selectionRectEnabled = false : e3._selectionRectEnabled = true : e3._selectionRectEnabled = false;
              var r2 = e3.isLeftButtonClicked(t3);
              if (r2 || (e3._scrollAreaClickOrDragStarted = false), e3._startPosMouseArgs) if (r2 || o4) {
                if (e3._drag && !e3._startedDragWithCtrl) {
                  var i2 = e3._currentPos.val;
                  if (e3._drag.type === w.Timeline) e3._setTimeInternal(i2, W.User);
                  else if ((e3._drag.type == w.Keyframe || e3._drag.type == w.Group) && e3._drag.elements) {
                    var l2 = Math.floor(i2 - e3._drag.val);
                    if (0 !== e3._moveElements(l2, e3._drag.elements, W.User)) {
                      if (!e3._drag.changed) {
                        e3._drag.prevVal = e3._drag.val;
                        var a2 = e3._emitDragStartedEvent(e3._drag);
                        if (!a2 || a2.isPrevented()) return e3._cleanUpSelection(true), void (e3._drag = null);
                      }
                      e3._drag.changed = true, e3._drag.val += l2, e3._emitDragEvent(e3._drag);
                    }
                  }
                }
                e3._interactionMode !== ge.Pan && e3._interactionMode !== ge.NonInteractivePan || e3._drag ? e3._interactionMode !== ge.None && e3._scrollBySelectionOutOfBounds(e3._currentPos.pos) : (e3._isPanStarted = true, e3._setCursor(be.Grabbing), e3._scrollByPan(e3._startPosMouseArgs.pos, e3._currentPos.pos, e3._scrollStartPos)), e3.redraw();
              } else e3._cleanUpSelection(true), e3.redraw();
              else if (!o4) {
                var s2 = null;
                e3._interactionMode !== ge.NonInteractivePan && e3._interactionMode !== ge.None || (s2 = [w.Timeline]);
                var u2 = e3._getClickDetectionRadius(e3._currentPos), c2 = e3.elementFromPoint(e3._currentPos.pos, u2, s2), f2 = e3._findDraggableElement(c2, e3._currentPos.val);
                if (e3._isPanStarted || e3._interactionMode === ge.Pan || e3._interactionMode === ge.NonInteractivePan) r2 ? e3._setCursor(be.Grabbing) : e3._setCursor(be.Grab);
                else {
                  if (e3._interactionMode === ge.Zoom) return void e3._setZoomCursor(t3);
                  e3._setCursor(be.Default);
                }
                if (f2) {
                  var d2 = null;
                  if (f2.type === w.Group) d2 = d2 || be.EWResize;
                  else if (f2.type == w.Keyframe) d2 = d2 || be.Pointer;
                  else if (f2.type == w.Timeline) {
                    var v2;
                    d2 = d2 || (null === (v2 = e3._options) || void 0 === v2 || null === (v2 = v2.timelineStyle) || void 0 === v2 ? void 0 : v2.cursor) || null;
                  }
                  d2 && e3._setCursor(d2);
                }
              }
              o4 && t3.preventDefault();
            }
          }), Ae(e3, "_handleMouseUpEvent", function(t3) {
            if (e3._scrollAreaClickOrDragStarted = false, e3._canvas && e3._startPosMouseArgs) {
              var n4 = e3._trackMousePos(e3._canvas, t3);
              if (e3._clickAllowed || !e3._clickTimeoutIsOver() || e3._drag && (e3._startedDragWithCtrl || e3._startedDragWithShiftKey)) if (e3._options && e3._interactionMode === ge.Zoom) {
                var o4 = e3._controlKeyPressed(t3) ? 1 : -1, r2 = e3._getMousePos(e3._canvas, t3), i2 = Math.max(0, r2.pos.x || 0);
                e3._zoom(o4, e3._options.zoomSpeed || 0, i2);
              } else e3._performClick(n4, e3._drag);
              else if (!e3._drag && e3._selectionRect && e3._selectionRectEnabled) {
                if (e3._interactionMode === ge.Zoom) ;
                else if (e3._interactionMode !== ge.None) {
                  var l2 = e3._getKeyframesByRectangle(e3._selectionRect), a2 = t3.shiftKey ? we.Append : we.Normal;
                  e3.select(l2, a2);
                }
              }
              e3._cleanUpSelection(), e3.redraw();
            }
          }), Ae(e3, "_canvasClientHeight", function() {
            return e3._canvas ? e3._canvas.clientHeight : 0;
          }), Ae(e3, "_canvasClientWidth", function() {
            return e3._canvas ? e3._canvas.clientWidth : 0;
          }), Ae(e3, "_getKeyframesByRectangle", function(t3) {
            var n4 = [];
            return e3._forEachKeyframe(function(e4) {
              (e4.shape === l.Rect ? d.isRectIntersects(e4.size, t3) : d.isOverlap(e4.size.x, e4.size.y, t3)) && n4.push(e4.model);
            }), n4;
          }), Ae(e3, "_performClick", function(t3, n4) {
            var o4 = false;
            if (n4 && n4.type === w.Keyframe) {
              var r2, i2, l2 = we.Normal;
              e3._startedDragWithCtrl && e3._controlKeyPressed(t3.args) ? e3._controlKeyPressed(t3.args) && (l2 = we.Revert) : e3._startedDragWithShiftKey && t3.args.shiftKey && (l2 = we.Append), o4 = e3._selectInternal((null == n4 || null === (r2 = n4.target) || void 0 === r2 ? void 0 : r2.keyframe) || null, l2).selectionChanged || o4, t3.args.shiftKey && false !== (null === (i2 = e3._options) || void 0 === i2 ? void 0 : i2.timelineDraggable) && (o4 = e3._setTimeInternal(t3.val, W.User) || o4);
            } else {
              var a2;
              o4 = e3._selectInternal(null).selectionChanged || o4, false !== (null === (a2 = e3._options) || void 0 === a2 ? void 0 : a2.timelineDraggable) && (o4 = e3._setTimeInternal(t3.val, W.User) || o4);
            }
            return o4;
          }), Ae(e3, "_setKeyframePos", function(t3, n4) {
            var o4 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : W.Programmatically;
            if (!t3 || !t3.keyframe) return n4;
            if (n4 = Math.floor(n4), t3.keyframe && t3.keyframe.val != n4) {
              t3.prevVal = t3.val, t3.val = n4, t3.keyframe.val = n4;
              var r2 = e3._emitKeyframeChanged(t3, o4);
              return r2.isPrevented() && (t3.val = r2.prevVal, t3.keyframe.val = r2.prevVal), n4;
            }
            return n4;
          }), Ae(e3, "_setCursor", function(t3) {
            e3._canvas && e3._canvas.style.cursor != t3 && (e3._canvas.style.cursor = t3);
          }), Ae(e3, "setInteractionMode", function(t3) {
            e3._interactionMode != t3 && (e3._interactionMode = t3, e3._cleanUpSelection(true), e3.redraw());
          }), Ae(e3, "getInteractionMode", function() {
            return e3._interactionMode;
          }), Ae(e3, "_convertToTimelineElement", function(e4, t3) {
            return { type: w.Keyframe, val: t3.val, keyframe: t3, row: e4 };
          }), Ae(e3, "getSelectedKeyframes", function() {
            return e3.getSelectedElements().map(function(e4) {
              return e4.keyframe;
            });
          }), Ae(e3, "getSelectedElements", function() {
            var t3 = [];
            return e3._forEachKeyframe(function(n4) {
              n4 && n4.model.selected && t3.push(e3._convertToTimelineElement(n4.rowViewModel.model, n4.model));
            }), t3;
          }), Ae(e3, "getAllKeyframes", function() {
            var t3 = [];
            return e3._forEachKeyframe(function(e4) {
              t3.push(e4.model);
            }), t3;
          }), Ae(e3, "selectAllKeyframes", function() {
            return e3.select(e3.getAllKeyframes(), we.Normal);
          }), Ae(e3, "deselectAll", function() {
            return e3.select(null);
          }), Ae(e3, "_changeNodeState", function(e4, t3, n4) {
            if (t3.selected !== n4) {
              var o4 = "boolean" != typeof t3.selectable || t3.selectable;
              if (!n4 || n4 && o4) return t3.selected = n4, e4.changed.push(t3), true;
            }
            return false;
          }), Ae(e3, "select", function(t3) {
            var n4 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : we.Normal, o4 = e3._selectInternal(t3, n4);
            return o4.selectionChanged && e3.redraw(), o4;
          }), Ae(e3, "_selectInternal", function(t3) {
            var n4 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : we.Normal;
            t3 || (t3 = []), Array.isArray(t3) || (t3 = [t3]);
            var o4 = { selectionChanged: false, selected: e3.getSelectedKeyframes(), changed: [] }, r2 = t3;
            if (r2 && n4 === we.Append) t3.forEach(function(t4) {
              e3._changeNodeState(o4, t4, true) && t4.selected && o4.selected.push(t4);
            });
            else if (r2 && n4 === we.Revert) t3.forEach(function(t4) {
              o4.selected.indexOf(t4) >= 0 ? (e3._changeNodeState(o4, t4, false), d.deleteElement(o4.selected, t4)) : (e3._changeNodeState(o4, t4, true), t4.selected && o4.selected.push(t4));
            });
            else if (n4 === we.Normal) {
              var i2 = [];
              t3 && t3.forEach(function(t4) {
                e3._changeNodeState(o4, t4, true), t4.selected && i2.push(t4);
              }), o4.selected.forEach(function(t4) {
                r2.indexOf(t4) >= 0 || e3._changeNodeState(o4, t4, false);
              }), o4.changed.length > 0 && (i2 ? o4.selected = i2 : o4.selected.length = 0);
            }
            return o4.changed.length > 0 && (o4.selectionChanged = true, e3._emitKeyframesSelected(o4)), o4;
          }), Ae(e3, "_startAutoPan", function() {
            e3._consts.autoPanSpeed && (e3._intervalRef || (e3._intervalRef = window.setInterval(function() {
              e3._handleMouseMoveEvent(null);
            }, e3._consts.autoPanSpeed)));
          }), Ae(e3, "_stopAutoPan", function() {
            e3._intervalRef && (clearInterval(e3._intervalRef), e3._intervalRef = null), e3._autoPanLastActionDate = 0;
          }), Ae(e3, "_toScreenPx", function(t3) {
            return e3.valToPx(t3) - e3.scrollLeft + e3._leftMargin();
          }), Ae(e3, "_fromScreen", function(t3) {
            return e3.pxToVal(e3.scrollLeft + t3 - e3._leftMargin());
          }), Ae(e3, "valToPx", function(t3) {
            if (!e3._options || !e3._options.stepPx) return t3;
            var n4 = e3._options.min || 0;
            d.isNumber(n4) || (n4 = 0), n4 *= e3._currentZoom || 1;
            var o4 = (e3._options.stepVal || 0) * e3._currentZoom || 1;
            return (-n4 + t3) * (e3._options.stepPx / o4);
          }), Ae(e3, "_mousePosToVal", function(t3) {
            var n4 = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], o4 = Math.min(t3, e3._canvasClientWidth()), r2 = e3._fromScreen(o4);
            return r2 = Math.round(r2), n4 && (r2 = e3.snapVal(r2)), r2;
          }), Ae(e3, "_formatUnitsText", function(e4) {
            var t3 = d.sign(e4) < 0 ? "-" : "", n4 = (e4 = Math.abs(e4)) / 1e3, o4 = Math.floor(n4 / 31536e3);
            n4 %= 31536e3;
            var r2 = Math.floor(n4 / 86400);
            n4 %= 86400;
            var i2 = Math.floor(n4 / 3600);
            n4 %= 3600;
            var l2 = Math.floor(n4 / 60);
            n4 %= 60;
            var a2 = "";
            return o4 && (a2 += o4 + ":"), r2 && (a2 += r2 + ":"), i2 && (a2 += i2 + ":"), l2 && (a2 += i2 ? d.timePadZero(l2) : l2 + ":"), isNaN(n4) || (a2 += l2 ? d.timePadZero(n4) : n4), t3 + a2;
          }), Ae(e3, "_leftMargin", function() {
            var t3;
            return (null === (t3 = e3._options) || void 0 === t3 ? void 0 : t3.leftMargin) || 0;
          }), Ae(e3, "_renderTicks", function() {
            var t3;
            if (!(!e3._ctx || !e3._ctx.canvas || e3._ctx.canvas.clientWidth <= 0 || e3._ctx.canvas.clientHeight <= 0) && e3._options && e3._options.stepPx) {
              var n4 = e3._canvasClientWidth() - e3._leftMargin(), o4 = e3.pxToVal(e3.scrollLeft), r2 = e3.pxToVal(e3.scrollLeft + n4);
              if (!isNaN(o4) && !isNaN(r2) && o4 !== r2) {
                if (r2 < o4) {
                  var i2 = r2;
                  r2 = o4, o4 = i2;
                }
                var l2 = d.getDistance(o4, r2);
                if (!(l2 <= 0)) {
                  var a2 = d.findGoodStep(l2 / (n4 / e3._options.stepPx), 0, null === (t3 = e3._options) || void 0 === t3 ? void 0 : t3.denominators), s2 = Math.floor(o4 / a2) * a2, u2 = Math.ceil(r2 / a2) * a2 + a2;
                  if (d.isNumber(a2) && !(a2 <= 0) && 0 !== Math.abs(u2 - s2)) {
                    var c2, f2 = 0;
                    e3._options.stepSmallPx && (f2 = d.findGoodStep(l2 / (n4 / e3._options.stepSmallPx), 0, null === (c2 = e3._options) || void 0 === c2 ? void 0 : c2.denominators));
                    var v2 = 0;
                    e3._ctx.save();
                    for (var y2 = S.headerHeight(e3._options), p2 = y2 / 2, _2 = y2 / 1.3, h2 = s2; h2 <= u2; h2 += a2) {
                      var m2 = e3._getSharp(e3._toScreenPx(h2));
                      e3._ctx.save(), e3._ctx.beginPath(), e3._ctx.setLineDash([4]), e3._ctx.lineWidth = 1, e3._options.tickColor && (e3._ctx.strokeStyle = e3._options.tickColor), d.drawLine(e3._ctx, m2, p2, m2, y2), e3._ctx.stroke(), e3._options.labelsColor && (e3._ctx.fillStyle = e3._options.labelsColor), e3._options.font && (e3._ctx.font = e3._options.font);
                      var g2 = e3._formatUnitsText(h2), b2 = e3._ctx.measureText(g2), w2 = m2 - b2.width / 2;
                      if ((isNaN(v2) || v2 <= w2) && (v2 = w2 + b2.width, e3._ctx.fillText(g2, w2, 10)), e3._ctx.restore(), d.isNumber(f2) && !(f2 <= 0)) for (var k2 = h2 + f2; k2 < h2 + a2; k2 += f2) {
                        var C2 = e3._getSharp(e3._toScreenPx(k2));
                        e3._ctx.beginPath(), e3._ctx.lineWidth = e3._pixelRatio, e3._options.tickColor && (e3._ctx.strokeStyle = e3._options.tickColor), d.drawLine(e3._ctx, C2, _2, C2, y2), e3._ctx.stroke();
                      }
                    }
                    e3._ctx.restore();
                  }
                }
              }
            }
          }), Ae(e3, "_generateViewModel", function() {
            var t3 = { size: { x: 0, y: 0, width: 0, height: 0 }, min: null, max: null, rowsViewModels: [], keyframesViewModels: [] };
            if (!e3._model) return t3;
            var n4 = e3._model.rows;
            if (!n4 || !Array.isArray(n4) || n4.length <= 0) return t3;
            var o4 = S.headerHeight(e3._options);
            return n4.forEach(function(n5, r2) {
              if (n5 && !n5.hidden) {
                var i2 = S.getRowHeight(n5.style || null, e3._options), l2 = S.getRowMarginBottom(n5.style || null, e3._options), a2 = o4 - (e3._scrollContainer ? e3._scrollContainer.scrollTop : 0);
                o4 += i2 + l2, 0 == r2 && (t3.size.y = a2), t3.size.height = Math.max(o4 + i2, t3.size.height);
                var s2 = { size: { x: 0, y: a2, width: e3._canvasClientWidth(), height: i2 }, marginBottom: l2, model: n5, index: r2, min: null, max: null, groupsViewModels: [], keyframesViewModels: [] };
                t3.rowsViewModels.push(s2), !n5.keyframes || !n5.keyframes.forEach || n5.keyframes.length <= 0 || (n5 && n5.keyframes && n5.keyframes.forEach(function(o5) {
                  var r3;
                  if (o5 && d.isNumber(o5.val)) {
                    if (!o5.hidden) {
                      var i3 = (null === (r3 = s2.groupsViewModels) || void 0 === r3 ? void 0 : r3.find(function(e4) {
                        return o5.group === e4.groupModel;
                      })) || null;
                      i3 || (i3 = { min: o5.val, max: o5.val, size: null, groupModel: o5.group, keyframesViewModels: [] }, s2.groupsViewModels.push(i3));
                      var l3 = S.keyframeShape(o5, o5.group, n5.style || null, e3._options), a3 = e3._getKeyframePosition(o5, i3, s2, l3), u2 = { model: o5, rowViewModel: s2, groupViewModel: i3, size: a3, shape: l3 }, c2 = null === i3.min ? o5.val : Math.min(o5.val, i3.min), f2 = null === i3.max ? o5.val : Math.max(o5.val, i3.max);
                      d.isNumber(c2) && (i3.min = c2), d.isNumber(f2) && (i3.max = f2), s2.keyframesViewModels.push(u2), i3.keyframesViewModels.push(u2), t3.keyframesViewModels.push(u2);
                    }
                  } else console.log("Unexpected null keyframe or having invalid value");
                }), s2.groupsViewModels.forEach(function(t4) {
                  d.setMinMax(s2, t4, true);
                  var n6 = e3._getKeyframesGroupSize(t4, s2);
                  t4.size = n6;
                }), d.setMinMax(t3, s2, true));
              }
            }), d.isNumber(t3.max) && (t3.max || 0 === t3.max) && (t3.size.width = e3.valToPx(t3.max)), t3;
          }), Ae(e3, "_renderRows", function() {
            if (e3._ctx) {
              var t3 = e3._generateViewModel();
              if (null != t3 && t3.rowsViewModels) try {
                e3._ctx.save(), t3.rowsViewModels.forEach(function(t4) {
                  if (t4 && e3._ctx) {
                    e3._ctx.fillStyle = S.getRowFillColor(t4.model.style || null, e3._options);
                    var n4 = e3._cutBounds(t4.size);
                    if (null != n4 && n4.rect) {
                      var o4 = null == n4 ? void 0 : n4.rect;
                      e3._ctx.fillRect(o4.x, o4.y, o4.width, o4.height);
                    }
                    e3._renderGroupBounds(t4);
                  }
                });
              } finally {
                e3._ctx.restore();
              }
            }
          }), Ae(e3, "_renderGroupBounds", function(t3) {
            var n4;
            t3 && e3._ctx && (null == t3 || null === (n4 = t3.groupsViewModels) || void 0 === n4 || n4.forEach(function(n5) {
              var o4, r2, i2, l2, a2;
              if (e3._ctx && !(((null == n5 || null === (o4 = n5.keyframesViewModels) || void 0 === o4 ? void 0 : o4.length) || 0) <= 1)) {
                var s2 = S.groupFillColor(e3._options, n5.groupModel, null == t3 || null === (r2 = t3.model) || void 0 === r2 ? void 0 : r2.style), u2 = S.groupStrokeColor(e3._options, n5.groupModel, null == t3 || null === (i2 = t3.model) || void 0 === i2 ? void 0 : i2.style), c2 = S.groupStrokeThickness(e3._options, n5.groupModel, null == t3 || null === (l2 = t3.model) || void 0 === l2 ? void 0 : l2.style), f2 = S.groupsRadii(e3._options, n5.groupModel, null == t3 || null === (a2 = t3.model) || void 0 === a2 ? void 0 : a2.style);
                if (n5.size) try {
                  e3._ctx.save();
                  var d2 = e3._cutBounds(n5.size);
                  if (null != d2 && d2.rect) {
                    var v2 = d2.rect;
                    u2 || (c2 = 0), e3._ctx.strokeStyle = c2 > 0 ? u2 : "", e3._ctx.fillStyle = s2, e3._ctx.lineWidth = c2, e3._ctx.beginPath(), e3._ctx.roundRect(v2.x + c2, v2.y + c2, v2.width - c2, v2.height - c2, f2), e3._ctx.fill(), c2 > 0 && e3._ctx.stroke();
                  }
                } finally {
                  e3._ctx.restore();
                }
                else console.log("Size of the group cannot be calculated");
              }
            }));
          }), Ae(e3, "_cutBounds", function(t3) {
            if (!t3) return null;
            var n4 = e3._canvasClientWidth() - 0, o4 = S.headerHeight(e3._options) + 0, r2 = e3._canvasClientHeight() - 0;
            return e3._cutBoundsWhenOverlap(t3, 0, n4, o4, r2);
          }), Ae(e3, "_cutBoundsWhenOverlap", function(e4, t3, n4, o4, r2) {
            if (!e4) return null;
            if (d.isRectIntersects(e4, { x: t3, y: o4, width: d.getDistance(t3, n4), height: d.getDistance(o4, r2) })) {
              var i2 = Math.max(e4.y, o4), l2 = Math.max(e4.x, t3), a2 = e4.x - l2, s2 = e4.y - i2;
              return { rect: { height: e4.height + s2, width: e4.width + a2, x: l2, y: i2 }, overlapY: Math.abs(s2) > 0, overlapX: Math.abs(a2) > 0 };
            }
            return null;
          }), Ae(e3, "_getKeyframesGroupSize", function(t3, n4) {
            var o4, r2, i2 = n4.size.y, l2 = n4.size.height, a2 = t3.groupModel || null, s2 = S.groupHeight(e3._options, a2, null == n4 || null === (o4 = n4.model) || void 0 === o4 ? void 0 : o4.style), u2 = S.groupMarginTop(e3._options, a2, null == n4 || null === (r2 = n4.model) || void 0 === r2 ? void 0 : r2.style), c2 = "auto" === s2;
            s2 && !c2 || (s2 = Math.floor(l2)), (s2 = "string" == typeof s2 ? parseInt(s2) : s2) > l2 && (s2 = l2);
            var f2 = "auto" === u2;
            "string" == typeof u2 && (u2 = f2 ? (l2 - s2) / 2 : parseInt(u2) || 0), f2 || c2 && (s2 -= 2 * u2);
            var v2 = e3._toScreenPx(t3.min), y2 = e3._toScreenPx(t3.max);
            return { x: v2, y: i2 + u2, height: s2, width: d.getDistance(v2, y2) };
          }), Ae(e3, "_getKeyframePosition", function(t3, n4, o4, r2) {
            var i2, a2;
            if (!t3) return console.log("keyframe should be defined."), null;
            var s2 = t3.val;
            if (!d.isNumber(s2)) return null;
            var u2 = o4.size, c2 = u2.y + u2.height / 2, f2 = (null == n4 ? void 0 : n4.groupModel) || null, v2 = S.keyframeHeight(t3, f2, null == o4 || null === (i2 = o4.model) || void 0 === i2 ? void 0 : i2.style, e3._options), y2 = S.keyframeWidth(t3, f2, null == o4 || null === (a2 = o4.model) || void 0 === a2 ? void 0 : a2.style, e3._options);
            if ("auto" === v2 && (v2 = u2.height / 3), "auto" === y2 && (y2 = v2), v2 = Number(v2), !Number.isNaN(v2) && v2 && v2 > 0) {
              var p2 = { x: Math.floor(e3._toScreenPx(s2)), y: c2 = Math.floor(c2), height: v2, width: y2 };
              return r2 === l.Rect && (p2.y = p2.y - p2.height / 2, p2.x = p2.x - p2.width / 2), p2;
            }
            return null;
          }), Ae(e3, "_renderKeyframes", function() {
            e3._forEachKeyframe(function(t3) {
              if (e3._ctx) {
                var n4 = t3.size;
                if (n4) {
                  var o4 = e3._getSharp(n4.x), r2 = n4.y, i2 = e3._cutBounds({ x: o4 - n4.width / 2, y: r2 - n4.height / 2, width: n4.width, height: n4.height });
                  if (!i2) return;
                  e3._ctx.save();
                  try {
                    i2 && i2.overlapY && (e3._ctx.beginPath(), e3._ctx.rect(0, S.headerHeight(e3._options), e3._canvasClientWidth(), e3._canvasClientWidth()), e3._ctx.clip()), e3._renderKeyframe(e3._ctx, t3);
                  } finally {
                    e3._ctx.restore();
                  }
                }
              }
            });
          }), Ae(e3, "_renderKeyframe", function(t3, n4) {
            var o4, r2 = n4.shape;
            if (r2 !== l.None) {
              var i2 = n4.size, a2 = e3._getSharp(i2.x), s2 = i2.y, u2 = n4.model, c2 = n4.rowViewModel.model.style || null, f2 = (null == n4 || null === (o4 = n4.groupViewModel) || void 0 === o4 ? void 0 : o4.groupModel) || null, d2 = u2.selected ? S.keyframeSelectedFillColor(u2, f2, c2, e3._options) : S.keyframeFillColor(u2, f2, c2, e3._options), v2 = S.keyframeStrokeThickness(u2, f2, c2, e3._options), y2 = "";
              v2 > 0 && (y2 = u2.selected ? S.keyframeSelectedStrokeColor(u2, f2, c2, e3._options) : S.keyframeStrokeColor(u2, f2, c2, e3._options)), r2 == l.Rhomb ? (t3.beginPath(), t3.translate(a2, s2), t3.rotate(45 * Math.PI / 180), v2 > 0 && y2 && (t3.fillStyle = y2, t3.rect(-i2.width / 2, -i2.height / 2, i2.width, i2.height), t3.fill()), t3.fillStyle = d2, t3.translate(v2, v2), t3.rect(-i2.width / 2, -i2.height / 2, i2.width - 2 * v2, i2.height - 2 * v2), t3.fill()) : r2 == l.Circle ? (t3.beginPath(), v2 > 0 && y2 && (t3.fillStyle = y2, t3.arc(a2, s2, i2.height, 0, 2 * Math.PI)), t3.fillStyle = d2, t3.arc(a2, s2, i2.height - v2, 0, 2 * Math.PI), t3.fill()) : r2 == l.Rect && (t3.beginPath(), v2 > 0 && y2 && (t3.fillStyle = y2, t3.rect(a2, s2, i2.width, i2.height), t3.fill()), t3.fillStyle = d2, t3.rect(a2 + v2, s2 + v2, i2.width - v2, i2.height - v2), t3.fill());
            }
          }), Ae(e3, "_renderSelectionRect", function() {
            if (!e3._drag && e3._ctx && e3._canvas) {
              if (e3._ctx.save(), e3._selectionRect && e3._selectionRectEnabled) {
                e3._ctx.setLineDash([4]), e3._ctx.lineWidth = e3._pixelRatio;
                var t3 = e3._options.selectionColor;
                t3 && (e3._ctx.strokeStyle = t3), e3._ctx.strokeRect(e3._getSharp(e3._selectionRect.x, 1), e3._getSharp(e3._selectionRect.y, 1), Math.floor(e3._selectionRect.width), Math.floor(e3._selectionRect.height));
              }
              e3._ctx.restore();
            }
          }), Ae(e3, "_renderBackground", function() {
            e3._ctx && e3._canvas && (e3._options.fillColor ? (e3._ctx.save(), e3._ctx.beginPath(), e3._ctx.rect(0, 0, e3._canvasClientWidth(), e3._canvasClientHeight()), e3._ctx.fillStyle = e3._options.fillColor, e3._ctx.fill(), e3._ctx.restore()) : e3._ctx.clearRect(0, 0, e3._canvas.width, e3._canvas.height));
          }), Ae(e3, "_renderTimeline", function() {
            if (e3._ctx && e3._options && e3._options.timelineStyle) {
              var t3 = e3._options.timelineStyle;
              e3._ctx.save();
              try {
                var n4 = t3.width || 1;
                e3._ctx.lineWidth = n4 * e3._pixelRatio;
                var o4 = e3._getSharp(e3._toScreenPx(e3._val), n4);
                t3.strokeColor && (e3._ctx.strokeStyle = t3.strokeColor), t3.fillColor && (e3._ctx.fillStyle = t3.fillColor);
                var r2 = t3.marginTop || 0, i2 = t3.marginBottom || 0;
                e3._ctx.beginPath();
                var l2 = e3._canvasClientHeight() - i2;
                d.drawLine(e3._ctx, o4, r2, o4, l2), e3._ctx.stroke(), e3._renderTimelineCap(o4, r2);
              } finally {
                e3._ctx.restore();
              }
            }
          }), Ae(e3, "_renderTimelineCap", function(t3, n4) {
            var o4, r2 = null === (o4 = e3._options) || void 0 === o4 || null === (o4 = o4.timelineStyle) || void 0 === o4 ? void 0 : o4.capStyle;
            if (e3._ctx && r2 && r2.capType !== Se.None) {
              e3._ctx.save();
              try {
                var i2 = r2.width || 0, l2 = r2.height || 0;
                i2 && l2 && (e3._ctx.strokeStyle = r2.strokeColor || "", e3._ctx.fillStyle = r2.fillColor || "white", r2.capType === Se.Triangle ? (e3._ctx.beginPath(), e3._ctx.moveTo(t3 - i2 / 2, n4), e3._ctx.lineTo(t3 + i2 / 2, n4), e3._ctx.lineTo(t3, l2), e3._ctx.closePath(), e3._ctx.stroke()) : r2.capType === Se.Rect && (e3._ctx.fillRect(t3 - i2 / 2, n4, i2, l2), e3._ctx.fill()));
              } finally {
                e3._ctx.restore();
              }
            }
          }), Ae(e3, "_renderHeaderBackground", function() {
            e3._ctx && e3._options && S.headerHeight(e3._options) && (e3._ctx.save(), e3._ctx.lineWidth = e3._pixelRatio, e3._options.headerFillColor ? (e3._ctx.lineWidth = e3._pixelRatio, e3._ctx.fillStyle = e3._options.headerFillColor, e3._ctx.fillRect(0, 0, e3._canvasClientWidth(), S.headerHeight(e3._options))) : e3._ctx.clearRect(0, 0, e3._canvasClientWidth(), S.headerHeight(e3._options)), e3._ctx.restore());
          }), Ae(e3, "redraw", function() {
            var t3;
            null !== (t3 = window) && void 0 !== t3 && t3.requestAnimationFrame ? window.requestAnimationFrame(e3._redrawInternal) : e3._redrawInternal();
          }), Ae(e3, "scrollToRightBounds", function() {
            e3._scrollContainer && e3._scrollContainer.scrollLeft !== e3._scrollContainer.scrollWidth && (e3.scrollLeft = e3._scrollContainer.scrollWidth);
          }), Ae(e3, "_redrawInternal", function() {
            e3._ctx && e3._scrollContainer ? (e3.valToPx(e3._val) > e3._scrollContainer.scrollWidth && (e3.rescale(), !e3._isPanStarted && e3._drag && e3._drag.type !== w.Timeline && e3.scrollToRightBounds()), e3._renderBackground(), e3._renderRows(), e3._renderHeaderBackground(), e3._renderTicks(), e3._renderKeyframes(), e3._renderSelectionRect(), e3._renderTimeline()) : console.log("Context is not initialized");
          }), Ae(e3, "_getSharp", function(t3) {
            var n4 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1;
            return t3 = Math.round(t3), n4 % 2 == 0 ? t3 : t3 + e3._pixelRatio / 2;
          }), Ae(e3, "getTime", function() {
            return e3._val;
          }), Ae(e3, "_setTimeInternal", function(t3) {
            var n4 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : W.Programmatically;
            if (!e3._options) return false;
            if (t3 = Math.round(t3), t3 = d.keepInBounds(t3, e3._options.min), e3._val != t3) {
              var o4 = e3._val, r2 = new U();
              return r2.val = t3, r2.prevVal = o4, r2.source = n4, e3._val = t3, e3.emit(ke.TimeChanged, r2), !r2.isPrevented() || (e3._val = o4, false);
            }
            return false;
          }), Ae(e3, "setTime", function(t3) {
            if (e3._drag && e3._drag.type === w.Timeline) return false;
            var n4 = e3._setTimeInternal(t3, W.SetTimeMethod);
            return n4 && (e3.rescale(), e3.redraw()), n4;
          }), Ae(e3, "getOptions", function() {
            return e3._options;
          }), Ae(e3, "setOptions", function(t3) {
            return e3._options = e3._setOptions(t3), e3.rescale(), e3.redraw(), e3._options;
          }), Ae(e3, "_applyContainersStyles", function() {
            if (e3._scrollContainer && e3._options) {
              var t3 = e3._scrollContainer.classList;
              e3._options.scrollContainerClass && !t3.contains(e3._options.scrollContainerClass) && t3.add(e3._options.scrollContainerClass), e3._options.fillColor && (e3._scrollContainer.style.background = e3._options.fillColor);
            }
          }), Ae(e3, "_setOptions", function(t3) {
            return t3 ? (e3._options = d.mergeOptions(e3._options, t3), e3._options.snapStep = d.keepInBounds(e3._options.snapStep || 0, 0, e3._options.stepVal || 0), e3._currentZoom = e3._setZoom(e3._options.zoom || 0, e3._options.zoomMin, e3._options.zoomMax), e3._options.min = d.isNumber(e3._options.min) ? e3._options.min : 0, e3._options.max = d.isNumber(e3._options.max) ? e3._options.max : Number.MAX_VALUE, e3._applyContainersStyles(), false === t3.timelineDraggable && e3._drag && e3._drag.type === w.Timeline && e3._cleanUpSelection(), e3._options) : e3._options || {};
          }), Ae(e3, "getModel", function() {
            return e3._model;
          }), Ae(e3, "setModel", function(t3) {
            e3._model = t3, e3.rescale(), e3.redraw();
          }), Ae(e3, "_getMousePos", function(t3, n4) {
            var o4 = 1, r2 = 0, i2 = 0;
            if (n4.changedTouches && n4.changedTouches.length > 0) {
              var l2 = n4.changedTouches[0];
              r2 = l2.clientX, i2 = l2.clientY, o4 = Math.max(o4, l2.radiusX, l2.radiusY);
            } else r2 = n4.clientX, i2 = n4.clientY;
            var a2 = t3.getBoundingClientRect(), s2 = t3.width / e3._pixelRatio / a2.width, u2 = t3.height / e3._pixelRatio / a2.height;
            return { pos: { x: (r2 - a2.left) * s2, y: (i2 - a2.top) * u2 }, radius: o4, args: n4 };
          }), Ae(e3, "_updateCanvasScale", function() {
            if (!e3._scrollContainer || !e3._container || !e3._ctx) return console.log("Component should be initialized first."), false;
            var t3 = false, n4 = e3._scrollContainer.clientWidth * e3._pixelRatio, o4 = e3._scrollContainer.clientHeight * e3._pixelRatio;
            return Math.floor(n4) != Math.floor(e3._ctx.canvas.width) && (e3._ctx.canvas.width = n4, t3 = true), Math.floor(o4) != Math.floor(e3._ctx.canvas.height) && (e3._ctx.canvas.height = o4, t3 = true), t3 && e3._ctx.setTransform(e3._pixelRatio, 0, 0, e3._pixelRatio, 0, 0), t3;
          }), Ae(e3, "rescale", function() {
            return e3._rescaleInternal();
          }), Ae(e3, "_rescaleInternal", function() {
            var t3 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null, n4 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, o4 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : Ce.DefaultMode, r2 = e3._updateCanvasScale();
            if (!e3._scrollContent) return r2;
            var i2 = e3._generateViewModel();
            if (i2 && i2.size) {
              var l2, a2 = e3._options.stepPx || 0;
              t3 = t3 || 0;
              var s2 = e3.valToPx(e3._val) + e3._leftMargin(), u2 = 0, c2 = e3.scrollLeft + e3.getClientWidth();
              s2 >= c2 && (u2 = o4 == Ce.ScrollBySelection ? Math.floor(s2 + e3._leftMargin()) : Math.floor(s2 + e3.getClientWidth() + e3._leftMargin()));
              var f2 = i2.size.width + e3._leftMargin() + a2;
              t3 = Math.max(t3, f2, c2, u2);
              var d2 = Math.floor(t3) + "px";
              d2 != e3._scrollContent.style.minWidth && (e3._scrollContent.style.minWidth = d2, r2 = true), n4 = Math.max(Math.floor(i2.size.height + 0.2 * e3._canvasClientHeight()), ((null === (l2 = e3._scrollContainer) || void 0 === l2 ? void 0 : l2.scrollTop) || 0) + e3._canvasClientHeight() - 1, Math.round(n4 || 0));
              var v2 = Math.floor(n4) + "px";
              if (e3._scrollContent.style.minHeight != v2) return e3._scrollContent.style.minHeight = v2, r2;
            }
            return r2;
          }), Ae(e3, "_filterDraggableElements", function(t3) {
            return t3.filter(function(t4) {
              if (!t4) return false;
              var n4;
              if (t4.type === w.Keyframe) {
                if (!S.keyframeDraggable(t4.keyframe || null, (null === (n4 = t4.keyframe) || void 0 === n4 ? void 0 : n4.group) || null, (null == t4 ? void 0 : t4.row) || null, e3._options)) return false;
              } else if (t4.type === w.Group) {
                if (!S.groupDraggable(t4.group || null, t4.row || null, e3._options)) return false;
              } else if (t4.type === w.Timeline) {
                var o4;
                if (false === (null === (o4 = e3._options) || void 0 === o4 ? void 0 : o4.timelineDraggable)) return false;
              } else if (t4.type === w.Row) return false;
              return true;
            });
          }), Ae(e3, "_findDraggableElement", function(t3) {
            var n4 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, o4 = function(e4) {
              return e4 === w.Timeline ? 1 : e4 === w.Keyframe ? 2 : e4 === w.Group ? 3 : -1;
            }, r2 = e3._filterDraggableElements(t3).sort(function(e4, t4) {
              var r3 = o4(e4.type), i2 = o4(t4.type);
              return r3 !== i2 || null !== n4 && (r3 = d.getDistance(e4.val, n4)) !== (i2 = d.getDistance(t4.val, n4)) ? r3 < i2 ? 1 : -1 : 0;
            });
            return r2.length > 0 ? r2[r2.length - 1] : null;
          }), Ae(e3, "elementFromPoint", function(t3, n4, o4) {
            var r2;
            n4 = Math.max(n4, 1);
            var i2 = [];
            if (!t3) return i2;
            var a2, s2 = S.headerHeight(e3._options), u2 = e3._toScreenPx(e3._val), c2 = 0, f2 = null === (r2 = e3._options) || void 0 === r2 ? void 0 : r2.timelineStyle;
            f2 && (c2 = Math.max((f2.width || 1) * e3._pixelRatio, ((null == f2 || null === (a2 = f2.capStyle) || void 0 === a2 ? void 0 : a2.width) || 0) * e3._pixelRatio || 1) + n4), (t3.y <= 0.5 * s2 || t3.x >= u2 - c2 / 2 && t3.x <= u2 + c2 / 2) && i2.push({ val: e3._val, type: w.Timeline });
            var v2 = e3._options.snapEnabled;
            return t3.y >= s2 && e3._options.keyframesDraggable && e3._forEachKeyframe(function(o5, r3, a3) {
              var s3 = o5.rowViewModel;
              a3 && s3.groupsViewModels && s3.groupsViewModels.forEach(function(n5) {
                if (null != n5 && n5.size && d.isOverlap(t3.x, t3.y, n5.size)) {
                  var o6 = (null == n5 ? void 0 : n5.keyframesViewModels.map(function(e4) {
                    return e4.model;
                  })) || [], r4 = { val: e3._mousePosToVal(t3.x, v2), type: w.Group, group: n5.groupModel, row: s3.model, keyframes: o6 }, l2 = e3.snapVal(n5.min);
                  r4.val += n5.min - l2, i2.push(r4);
                }
              });
              var u3 = o5.size;
              if (u3) {
                var c3 = false;
                if (o5.shape === l.Rect) {
                  var f3 = d.shrinkSelf({ x: t3.x, y: t3.y, height: n4, width: n4 }, n4);
                  c3 = d.isRectIntersects(f3, u3, true);
                } else c3 = d.getDistance(u3.x, u3.y, t3.x, t3.y) <= u3.height + n4;
                c3 && i2.push({ keyframe: o5.model, keyframes: [o5.model], val: o5.model.val, row: o5.rowViewModel.model, type: w.Keyframe });
              }
            }, function(n5) {
              if (d.isOverlap(t3.x, t3.y, n5.size)) {
                var o5 = { val: e3._mousePosToVal(t3.x, v2), keyframes: n5.model.keyframes, type: w.Row, row: n5.model };
                i2.push(o5);
              }
            }), o4 && 0 !== o4.length ? i2.filter(function(e4) {
              return o4 && o4.includes(e4.type);
            }) : i2;
          }), Ae(e3, "onTimeChanged", function(t3) {
            e3.on(ke.TimeChanged, t3);
          }), Ae(e3, "onDragStarted", function(t3) {
            e3.on(ke.DragStarted, t3);
          }), Ae(e3, "onDrag", function(t3) {
            e3.on(ke.Drag, t3);
          }), Ae(e3, "onDragFinished", function(t3) {
            e3.on(ke.DragFinished, t3);
          }), Ae(e3, "onDoubleClick", function(t3) {
            e3.on(ke.DoubleClick, t3);
          }), Ae(e3, "onKeyframeChanged", function(t3) {
            e3.on(ke.KeyframeChanged, t3);
          }), Ae(e3, "onMouseDown", function(t3) {
            e3.on(ke.MouseDown, t3);
          }), Ae(e3, "onSelected", function(t3) {
            e3.on(ke.Selected, t3);
          }), Ae(e3, "onScroll", function(t3) {
            e3.on(ke.Scroll, t3);
          }), Ae(e3, "onScrollFinished", function(t3) {
            e3.on(ke.ScrollFinished, t3);
          }), Ae(e3, "onContextMenu", function(t3) {
            e3.on(ke.ContextMenu, t3);
          }), Ae(e3, "_emitScrollEvent", function(n4, o4) {
            var r2, i2, l2 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : ke.Scroll, a2 = { args: n4, scrollProgrammatically: o4, scrollLeft: e3.scrollLeft, scrollTop: e3.scrollTop, scrollHeight: (null === (r2 = e3._scrollContainer) || void 0 === r2 ? void 0 : r2.scrollHeight) || 0, scrollWidth: (null === (i2 = e3._scrollContainer) || void 0 === i2 ? void 0 : i2.scrollWidth) || 0 };
            return Ne(ze(t2.prototype), "emit", e3).call(e3, l2, a2), a2;
          }), Ae(e3, "_emitKeyframeChanged", function(t3) {
            var n4 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : W.Programmatically, o4 = new V();
            return o4.val = t3.val, o4.prevVal = t3.prevVal, o4.target = t3, o4.source = n4, e3.emit(ke.KeyframeChanged, o4), o4;
          }), Ae(e3, "_emitDragStartedEvent", function(t3) {
            if (!t3) return null;
            var n4 = e3._getDragEventArgs(t3, e3._currentPos);
            return e3.emit(ke.DragStarted, n4), n4.isPrevented() && e3._preventDrag(n4, t3, true), n4;
          }), Ae(e3, "_emitDragFinishedEvent", function(t3) {
            var n4 = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
            if (!t3 || !t3.changed) return null;
            var o4 = e3._getDragEventArgs(t3, e3._currentPos);
            return n4 && o4.preventDefault(), e3.emit(ke.DragFinished, o4), o4.isPrevented() && e3._preventDrag(o4, t3, true), o4;
          }), Ae(e3, "_preventDrag", function(t3, n4) {
            var o4 = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
            t3.elements && t3.elements.forEach(function(t4) {
              var n5 = o4 ? t4.startedVal : t4.prevVal;
              e3._setKeyframePos(t4, n5);
            }), n4.val = n4.prevVal, t3.point = t3.prevPoint;
          }), Ae(e3, "_emitDragEvent", function(t3) {
            if (!t3) return null;
            var n4 = e3._getDragEventArgs(t3, e3._currentPos);
            return e3.emit(ke.Drag, n4), n4.isPrevented() && e3._preventDrag(n4, t3, false), n4;
          }), Ae(e3, "_emitKeyframesSelected", function(t3) {
            var n4 = new ee();
            return n4.selected = t3.selected, n4.changed = t3.changed, e3.emit(ke.Selected, n4), n4;
          }), Ae(e3, "_getDragEventArgs", function(e4, t3) {
            var n4 = new me();
            return n4.point = t3, n4.elements = function(e5) {
              return function(e6) {
                if (Array.isArray(e6)) return Ee(e6);
              }(e5) || function(e6) {
                if ("undefined" != typeof Symbol && null != e6[Symbol.iterator] || null != e6["@@iterator"]) return Array.from(e6);
              }(e5) || function(e6, t4) {
                if (e6) {
                  if ("string" == typeof e6) return Ee(e6, t4);
                  var n5 = {}.toString.call(e6).slice(8, -1);
                  return "Object" === n5 && e6.constructor && (n5 = e6.constructor.name), "Map" === n5 || "Set" === n5 ? Array.from(e6) : "Arguments" === n5 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n5) ? Ee(e6, t4) : void 0;
                }
              }(e5) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
              }();
            }(e4.elements || []), n4.target = (null == e4 ? void 0 : e4.target) || null, n4;
          }), e3._options = d.cloneOptions(Pe), (n3 || o3) && e3.initialize(n3, o3), e3;
        }
        return function(e3, t3) {
          if ("function" != typeof t3 && null !== t3) throw new TypeError("Super expression must either be null or a function");
          e3.prototype = Object.create(t3 && t3.prototype, { constructor: { value: e3, writable: true, configurable: true } }), Object.defineProperty(e3, "prototype", { writable: false }), t3 && je(e3, t3);
        }(t2, e2), n2 = t2, o2 = [{ key: "_getCtx", value: function() {
          return this._canvas ? (this._ctx || (this._ctx = this._canvas.getContext("2d")), this._ctx) : null;
        } }, { key: "_moveElements", value: function(e3, t3) {
          var n3 = this, o3 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : W.Programmatically;
          if (!t3) return 0;
          var r2 = false;
          if (Math.abs(e3) > 0) {
            var i2 = { min: Number.MIN_SAFE_INTEGER, max: Number.MAX_SAFE_INTEGER };
            if (i2 = d.setMinMax(i2, this._options), t3.forEach(function(t4) {
              var o4;
              if (t4 && t4.keyframe) {
                var r3 = d.setMinMax(d.setMinMax({ min: i2.min, max: i2.max }, t4.keyframe), t4.row || null), l2 = (null !== (o4 = n3._options) && void 0 !== o4 && o4.snapAllKeyframesOnMove ? n3.snapVal(t4.keyframe.val) : t4.keyframe.val) + e3;
                (r3.min || 0 === r3.min) && d.isNumber(r3.min) && l2 < r3.min && (e3 += d.getDistance(r3.min, l2)), (r3.max || 0 === r3.max) && d.isNumber(r3.max) && l2 > r3.max && (e3 -= d.getDistance(r3.max, l2));
              }
            }), Math.abs(e3) > 0 && t3.forEach(function(t4) {
              if (null != t4 && t4.keyframe) {
                var i3 = t4.keyframe.val, l2 = i3 + e3, a2 = n3._setKeyframePos(t4, l2, o3);
                r2 = a2 !== i3;
              }
            }), r2) return e3;
          }
          return 0;
        } }, { key: "_forEachKeyframe", value: function(e3, t3) {
          var n3;
          if ((e3 || t3) && this._model) {
            var o3 = this._generateViewModel();
            o3 && (null == o3 || null === (n3 = o3.rowsViewModels) || void 0 === n3 || n3.forEach(function(n4) {
              if (n4) {
                t3 && t3(n4);
                var o4 = true;
                e3 && n4.keyframesViewModels.forEach(function(t4, n5) {
                  t4 && e3(t4, n5, o4), o4 = false;
                });
              }
            }));
          }
        } }, { key: "_trackMousePos", value: function(e3, t3) {
          var n3 = this._getMousePos(e3, t3), o3 = n3.pos;
          if (n3.originalVal = this._mousePosToVal(o3.x, false), n3.snapVal = this._mousePosToVal(o3.x, true), n3.val = n3.originalVal, this._options && this._options.snapEnabled && (n3.val = n3.snapVal), this._startPosMouseArgs) {
            var r2, i2;
            this._selectionRect || (this._selectionRect = {});
            var l2 = this._startPosMouseArgs.pos, a2 = Math.floor(l2.x + (((null === (r2 = this._scrollStartPos) || void 0 === r2 ? void 0 : r2.x) || 0) - this.scrollLeft)), s2 = Math.floor(l2.y + (((null === (i2 = this._scrollStartPos) || void 0 === i2 ? void 0 : i2.y) || 0) - this.scrollTop));
            this._selectionRect.x = Math.min(a2, o3.x), this._selectionRect.y = Math.min(s2, o3.y), this._selectionRect.width = Math.max(a2, o3.x) - this._selectionRect.x, this._selectionRect.height = Math.max(s2, o3.y) - this._selectionRect.y, this._clickAllowed && (this._clickAllowed = this._selectionRect.height <= this._consts.clickThreshold && this._selectionRect.width <= this._consts.clickThreshold);
          }
          return n3;
        } }, { key: "getClientWidth", value: function() {
          var e3;
          return (null === (e3 = this._scrollContainer) || void 0 === e3 ? void 0 : e3.clientWidth) || 0;
        } }, { key: "getClientHeight", value: function() {
          var e3;
          return (null === (e3 = this._scrollContainer) || void 0 === e3 ? void 0 : e3.clientHeight) || 0;
        } }, { key: "_cleanUpSelection", value: function() {
          var e3 = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
          this._drag && this._emitDragFinishedEvent(this._drag, e3), this._startPosMouseArgs = null, this._drag = null, this._scrollAreaClickOrDragStarted = false, this._startedDragWithCtrl = false, this._startedDragWithShiftKey = false, this._selectionRect = null, this._clickTimeout = null, this._scrollStartPos = null, this._isPanStarted = false, this._clickAllowed = false, this._stopAutoPan();
        } }, { key: "_clickTimeoutIsOver", value: function() {
          return !!(this._clickTimeout && Date.now() - this._clickTimeout > this._consts.clickDetectionMs);
        } }, { key: "_checkUpdateSpeedTooFast", value: function() {
          return !!(this._autoPanLastActionDate && Date.now() - this._autoPanLastActionDate <= this._consts.autoPanSpeedLimit) || (this._autoPanLastActionDate = Date.now(), false);
        } }, { key: "_scrollByPan", value: function(e3, t3, n3) {
          if (e3 && t3 && this._scrollContainer) {
            var o3 = 0, r2 = 0;
            n3 && (o3 = n3.x, r2 = n3.y);
            var i2 = Math.round(e3.x - t3.x), l2 = o3 + i2;
            i2 > 0 && this._rescaleInternal(l2 + this._canvasClientWidth()), i2 > 0 && l2 + this._canvasClientWidth() >= this._scrollContainer.scrollWidth - 5 ? this.scrollLeft = this._scrollContainer.scrollWidth : this.scrollLeft = l2, this.scrollTop = Math.round(r2 + e3.y - t3.y);
          }
        } }, { key: "_scrollBySelectionOutOfBounds", value: function(e3) {
          if (!this._scrollContainer) return false;
          var t3 = e3.x, n3 = e3.y, o3 = false, r2 = 0, i2 = 0, l2 = this._consts.autoPanByScrollPadding, a2 = t3 <= l2, s2 = t3 >= this._canvasClientWidth() - l2, u2 = n3 <= l2, c2 = n3 >= this._canvasClientHeight() - l2, f2 = null, v2 = null;
          if (a2 || s2 || u2 || c2) {
            if (this._startAutoPan(), this._checkUpdateSpeedTooFast()) return false;
            var y2 = isNaN(this._consts.scrollByDragSpeed) ? 1 : this._consts.scrollByDragSpeed;
            a2 ? r2 = -d.getDistance(t3, l2) * y2 : s2 && (r2 = d.getDistance(t3, this._canvasClientWidth() - l2) * y2, f2 = this.scrollLeft + this._canvasClientWidth() + r2), u2 ? i2 = -d.getDistance(t3, l2) * y2 / 4 : c2 && (i2 = d.getDistance(t3, this._canvasClientHeight() - l2) * y2 / 4, v2 = this._scrollContainer.scrollTop + this._canvasClientHeight());
          } else this._stopAutoPan();
          return (f2 || v2) && this._rescaleInternal(f2, v2, Ce.ScrollBySelection), Math.abs(r2) > 0 && (this.scrollLeft = this._scrollContainer.scrollLeft + r2, o3 = true), Math.abs(i2) > 0 && (this.scrollTop = this._scrollContainer.scrollTop + i2, o3 = true), o3;
        } }, { key: "pxToVal", value: function(e3) {
          if (!this._options) return e3;
          var t3 = this._options.min || 0;
          d.isNumber(t3) || (t3 = 0);
          var n3 = this._options.stepPx || 0;
          return 0 === n3 ? e3 : (t3 *= this._currentZoom || 1) + e3 / n3 * ((this._options.stepVal || 0) * this._currentZoom || 1);
        } }, { key: "snapVal", value: function(e3) {
          if (this._options && this._options.snapEnabled && this._options.snapStep) {
            var t3 = this._options.snapStep, n3 = e3 / t3, o3 = Math.round(n3), r2 = Math.abs(this._options.min || 0) / this._options.snapStep, i2 = d.sign(this._options.min || 1) * (r2 - Math.floor(r2)) * this._options.snapStep;
            e3 = Math.round(i2) + Math.round(o3 * t3);
          }
          return d.keepInBounds(e3, this._options.min, this._options.max);
        } }, { key: "scrollLeft", get: function() {
          var e3;
          return (null === (e3 = this._scrollContainer) || void 0 === e3 ? void 0 : e3.scrollLeft) || 0;
        }, set: function(e3) {
          this._scrollContainer && this._scrollContainer.scrollLeft !== e3 && (this._scrollProgrammatically = true, this._scrollContainer.scrollLeft = e3);
        } }, { key: "scrollTop", get: function() {
          var e3;
          return (null === (e3 = this._scrollContainer) || void 0 === e3 ? void 0 : e3.scrollTop) || 0;
        }, set: function(e3) {
          this._scrollContainer && this._scrollContainer.scrollTop !== e3 && (this._scrollProgrammatically = true, this._scrollContainer.scrollTop = e3);
        } }], o2 && De(n2.prototype, o2), Object.defineProperty(n2, "prototype", { writable: false }), n2;
        var n2, o2;
      }(i);
      return t;
    })());
  }
});
export default require_animation_timeline_min();
//# sourceMappingURL=animation-timeline-js.js.map
